import{r as e,a as t,b as s,u as a,c as i,L as n,R as r,N as l,d as o,e as c,B as d,f as m}from"./vendor-DoJOJIQu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var h,u,p={exports:{}},f={};var b,x=(u||(u=1,p.exports=function(){if(h)return f;h=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,a){var l,o={},c=null,d=null;for(l in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,l)&&!r.hasOwnProperty(l)&&(o[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===o[l]&&(o[l]=t[l]);return{$$typeof:s,type:e,key:c,ref:d,props:o,_owner:n.current}}return f.Fragment=a,f.jsx=l,f.jsxs=l,f}()),p.exports),g={};var j=function(){if(b)return g;b=1;var e=t();return g.createRoot=e.createRoot,g.hydrateRoot=e.hydrateRoot,g}();const v=s.createContext(null);function N({children:e}){const[t,i]=s.useState(null),[n,r]=s.useState(null),l=a();s.useEffect(()=>{try{const e=localStorage.getItem("trident_user"),t=localStorage.getItem("trident_token");e&&t&&(i(JSON.parse(e)),r(t))}catch(e){console.warn("failed to read auth from storage",e)}},[]);const o={user:t,token:n,login:function({user:e,token:t}){i(e),r(t);try{localStorage.setItem("trident_user",JSON.stringify(e)),localStorage.setItem("trident_token",t)}catch(s){console.warn("failed to persist auth",s)}},logout:function(){i(null),r(null);try{localStorage.removeItem("trident_user"),localStorage.removeItem("trident_token")}catch(e){}try{window.location.href="/"}catch(e){}},isAuthenticated:!!n,setUser:i,isProfileComplete:function(e){if(!e)return!1;if("admin"===e.role)return!0;const t=e.profile||{};return Boolean(t.name&&t.bio&&t.contact)},loginAndRedirect:function({user:e,token:t}){i(e),r(t);try{localStorage.setItem("trident_user",JSON.stringify(e)),localStorage.setItem("trident_token",t)}catch(a){console.warn("failed to persist auth",a)}const s=e?.role||"researcher";l("admin"===s?"/admin":`/dashboard/${s}`,{replace:!0})}};return x.jsx(v.Provider,{value:o,children:e})}function y(){return s.useContext(v)}function _({open:e,onClose:t,children:a}){if(s.useEffect(()=>{function s(e){"Escape"===e.key&&t()}return e&&document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,t]),!e)return null;const n=document.getElementById("modal-root")||document.body;return i.createPortal(x.jsxs("div",{className:"modal show d-block",tabIndex:"-1",role:"dialog",children:[x.jsx("div",{className:"modal-backdrop-custom",onClick:t}),x.jsx("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:x.jsx("div",{className:"modal-content",children:x.jsx("div",{className:"modal-body",children:a})})})]}),n)}function w({role:e="nonprofit",onClose:t=()=>{}}){const{loginAndRedirect:a}=s.useContext(v),[i,n]=s.useState(e),[r,l]=s.useState(""),[o,c]=s.useState(""),[d,m]=s.useState(""),[h,u]=s.useState(!1),[p,f]=s.useState(!1),[b,g]=s.useState(null),[j,N]=s.useState(null),[y,_]=s.useState(""),[w,k]=s.useState(""),[C,S]=s.useState(""),[A,E]=s.useState(""),[T,P]=s.useState(""),[O,D]=s.useState(""),[$,L]=s.useState(""),[F,I]=s.useState(""),[z,M]=s.useState(""),[R,B]=s.useState(""),[q,H]=s.useState(""),[U,W]=s.useState(""),[V,Y]=s.useState(""),[J,X]=s.useState(!1);return x.jsxs("div",{children:[x.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[x.jsx("h5",{className:"mb-0",children:"Sign up"}),x.jsx("small",{className:"text-muted",children:"Role:"})]}),x.jsxs("div",{className:"btn-group mb-3",role:"group","aria-label":"Role",children:[x.jsx("button",{type:"button",onClick:()=>n("nonprofit"),className:"btn "+("nonprofit"===i?"btn-primary":"btn-outline-secondary"),children:"Nonprofit"}),x.jsx("button",{type:"button",onClick:()=>n("researcher"),className:"btn "+("researcher"===i?"btn-primary":"btn-outline-secondary"),children:"Researcher"})]}),b&&x.jsx("div",{className:"alert alert-danger",children:b}),j&&x.jsx("div",{className:"alert alert-success",children:j}),x.jsxs("form",{onSubmit:async function(e){if(e.preventDefault(),g(null),N(null),r&&d&&o)if("nonprofit"!==i||!J||y||C){if("researcher"===i&&J&&q&&U){if(parseFloat(q)>parseFloat(U))return void g("Minimum rate must be less than maximum rate.")}f(!0);try{const e={name:o.trim(),email:r.trim(),password:d,role:i,mfa_enabled:!!h};"nonprofit"===i&&J&&(e.organizationData={name:y.trim()||void 0,EIN:w.trim()||void 0,mission:C.trim()||void 0,focus_tags:A?A.split(",").map(e=>e.trim()).filter(Boolean):void 0,contacts:{phone:T.trim()||void 0,website:O.trim()||void 0}}),"researcher"===i&&J&&(e.researcherData={affiliation:$.trim()||void 0,domains:F?F.split(",").map(e=>e.trim()).filter(Boolean):void 0,methods:z?z.split(",").map(e=>e.trim()).filter(Boolean):void 0,tools:R?R.split(",").map(e=>e.trim()).filter(Boolean):void 0,rate_min:q?parseFloat(q):void 0,rate_max:U?parseFloat(U):void 0,availability:V.trim()||void 0});const s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),n=await s.json();if(s.ok)a({user:n.user,token:n.token}),N("Account created successfully! Redirecting..."),setTimeout(()=>t(),900);else{const e=n&&n.error?n.error:`Registration failed (${s.status})`;g(e)}f(!1)}catch(s){console.error(s),g("Network error while registering. Please try again."),f(!1)}}else g("Please provide at least organization name or mission.");else g("Name, email and password are required.")},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Name"}),x.jsx("input",{className:"form-control",value:o,onChange:e=>c(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Email"}),x.jsx("input",{className:"form-control",type:"email",value:r,onChange:e=>l(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Password"}),x.jsx("input",{className:"form-control",type:"password",value:d,onChange:e=>m(e.target.value),required:!0,minLength:8}),x.jsx("div",{className:"form-text",children:"Password should be at least 8 characters."})]}),x.jsxs("div",{className:"form-check mb-3",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"mfaEnabled",checked:h,onChange:e=>u(e.target.checked)}),x.jsx("label",{className:"form-check-label",htmlFor:"mfaEnabled",children:"Enable multi-factor authentication (MFA)"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("button",{type:"button",className:"btn btn-link p-0 text-decoration-none",onClick:()=>X(!J),children:[J?"▼":"▶"," ","nonprofit"===i?"Organization":"Professional"," Profile (Optional)"]}),x.jsxs("div",{className:"form-text",children:["You can ",J?"skip this now and ":"","complete your profile later in account settings"]})]}),J&&"nonprofit"===i&&x.jsx("div",{className:"card mb-3",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h6",{className:"card-title mb-3",children:"Organization Details"}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Organization Name"}),x.jsx("input",{className:"form-control",value:y,onChange:e=>_(e.target.value),placeholder:"Save the Forests Foundation"}),x.jsx("div",{className:"form-text",children:"Leave blank to use your name"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"EIN (Tax ID)"}),x.jsx("input",{className:"form-control",value:w,onChange:e=>k(e.target.value),placeholder:"12-3456789",pattern:"[0-9]{2}-[0-9]{7}"}),x.jsx("div",{className:"form-text",children:"Format: XX-XXXXXXX"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Mission Statement"}),x.jsx("textarea",{className:"form-control",rows:"3",value:C,onChange:e=>S(e.target.value),placeholder:"Our mission is to..."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Focus Areas"}),x.jsx("input",{className:"form-control",value:A,onChange:e=>E(e.target.value),placeholder:"environment, conservation, climate change"}),x.jsx("div",{className:"form-text",children:"Comma-separated tags"})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{className:"form-label",children:"Phone"}),x.jsx("input",{className:"form-control",type:"tel",value:T,onChange:e=>P(e.target.value),placeholder:"555-0123"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{className:"form-label",children:"Website"}),x.jsx("input",{className:"form-control",type:"url",value:O,onChange:e=>D(e.target.value),placeholder:"https://example.org"})]})]})]})}),J&&"researcher"===i&&x.jsx("div",{className:"card mb-3",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h6",{className:"card-title mb-3",children:"Professional Profile"}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Affiliation"}),x.jsx("input",{className:"form-control",value:$,onChange:e=>L(e.target.value),placeholder:"Massachusetts Institute of Technology"}),x.jsx("div",{className:"form-text",children:"University, institution, or organization"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Domains of Expertise"}),x.jsx("input",{className:"form-control",value:F,onChange:e=>I(e.target.value),placeholder:"machine learning, data science, AI ethics"}),x.jsx("div",{className:"form-text",children:"Comma-separated areas of expertise"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Research Methods"}),x.jsx("input",{className:"form-control",value:z,onChange:e=>M(e.target.value),placeholder:"statistical analysis, deep learning, NLP"}),x.jsx("div",{className:"form-text",children:"Comma-separated methodologies"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Tools & Technologies"}),x.jsx("input",{className:"form-control",value:R,onChange:e=>B(e.target.value),placeholder:"Python, TensorFlow, R, PyTorch"}),x.jsx("div",{className:"form-text",children:"Comma-separated tools you use"})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{className:"form-label",children:"Minimum Rate ($/hour)"}),x.jsx("input",{className:"form-control",type:"number",min:"0",step:"5",value:q,onChange:e=>H(e.target.value),placeholder:"100"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{className:"form-label",children:"Maximum Rate ($/hour)"}),x.jsx("input",{className:"form-control",type:"number",min:"0",step:"5",value:U,onChange:e=>W(e.target.value),placeholder:"250"})]})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Availability"}),x.jsx("input",{className:"form-control",value:V,onChange:e=>Y(e.target.value),placeholder:"Part-time, 10-20 hours/week"}),x.jsx("div",{className:"form-text",children:"Describe your availability for projects"})]})]})}),x.jsxs("div",{className:"d-flex justify-content-end",children:[x.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary me-2",disabled:p,children:"Cancel"}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Creating...":"Create account"})]})]})]})}function k({onSuccess:e=()=>{},onClose:t=()=>{}}){const[a,i]=s.useState(""),[n,r]=s.useState(""),[l,o]=s.useState(!1),[c,d]=s.useState(null),{loginAndRedirect:m}=s.useContext(v);return x.jsxs("div",{children:[c&&x.jsx("div",{className:"alert alert-danger",children:c}),x.jsxs("form",{onSubmit:async function(s){if(s.preventDefault(),d(null),a&&n){o(!0);try{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a.trim().toLowerCase(),password:n})}),i=await s.json();s.ok?(m({user:i.user,token:i.token}),e(i),t()):d(i&&i.error||`Login failed (${s.status})`),o(!1)}catch(i){console.error(i),d("Network error during login"),o(!1)}}else d("Email and password are required")},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Email"}),x.jsx("input",{type:"email",className:"form-control",value:a,onChange:e=>i(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Password"}),x.jsx("input",{type:"password",className:"form-control",value:n,onChange:e=>r(e.target.value),required:!0})]}),x.jsxs("div",{className:"d-flex justify-content-end",children:[x.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary me-2",disabled:l,children:"Cancel"}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Signing in...":"Sign in"})]})]})]})}function C({isMobile:e=!1}){const{isAuthenticated:t}=y(),s=e?"nav flex-column":"d-none d-lg-flex gap-3";return x.jsxs("nav",{className:s,children:[x.jsx(n,{to:"/",className:"nav-link",children:"Home"}),x.jsx(n,{to:"/browse",className:"nav-link",children:"Browse Projects"}),x.jsx("a",{href:"#about",className:"nav-link",children:"About"}),x.jsx("a",{href:"#how",className:"nav-link",children:"How it Works"}),x.jsx("a",{href:"#pricing",className:"nav-link",children:"Pricing"}),x.jsx("a",{href:"#faq",className:"nav-link",children:"FAQ"}),x.jsx("a",{href:"#contact",className:"nav-link",children:"Contact"}),t&&x.jsx(n,{to:"/messages",className:"nav-link",children:"Messages"})]})}function S(){const[e,t]=s.useState(!1),[a,i]=s.useState("nonprofit"),[r,l]=s.useState("signup"),[o,c]=s.useState(!1),d=y(),m=d.user?.role||"user";return x.jsxs("header",{className:"bg-white shadow-sm",children:[x.jsxs("div",{className:"container py-3",children:[x.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[x.jsxs("div",{className:"d-flex align-items-center gap-3",children:[x.jsx(n,{to:"/",className:"text-decoration-none text-dark",children:x.jsx("div",{className:"h5 mb-0",children:"Trident"})}),x.jsx(C,{})]}),x.jsx("div",{className:"d-flex align-items-center gap-2",children:d&&d.isAuthenticated?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"d-none d-md-flex align-items-center gap-2",children:[x.jsxs("span",{className:"text-dark d-none d-lg-inline",children:["Hi, ",x.jsx("strong",{className:"fw-semibold",children:d.user?.name||d.user?.email})]}),x.jsx(n,{to:"admin"===m?"/admin":`/dashboard/${m}`,className:"btn btn-primary btn-sm",children:"Dashboard"}),x.jsx(n,{to:"/settings",className:"btn btn-outline-primary btn-sm",children:"Settings"}),x.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>d.logout(),children:"Logout"})]}),x.jsx("button",{className:"btn btn-outline-secondary d-md-none",type:"button",onClick:()=>c(!o),"aria-label":"Toggle navigation",children:x.jsx("span",{className:"navbar-toggler-icon",children:"☰"})})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"d-none d-md-flex gap-2",children:[x.jsx("button",{type:"button",className:"btn btn-link text-muted",onClick:()=>{l("login"),t(!0)},children:"Sign In"}),x.jsxs("div",{className:"dropdown",id:"signup-dropdown",children:[x.jsx("button",{className:"btn btn-primary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Sign Up"}),x.jsxs("ul",{className:"dropdown-menu dropdown-menu-end",children:[x.jsx("li",{children:x.jsx("button",{className:"dropdown-item",onClick:()=>{i("nonprofit"),l("signup"),t(!0)},children:"Nonprofit"})}),x.jsx("li",{children:x.jsx("button",{className:"dropdown-item",onClick:()=>{i("researcher"),l("signup"),t(!0)},children:"Researcher"})})]})]})]}),x.jsx("button",{className:"btn btn-outline-secondary d-md-none",type:"button",onClick:()=>c(!o),"aria-label":"Toggle navigation",children:x.jsx("span",{className:"navbar-toggler-icon",children:"☰"})})]})})]}),o&&x.jsxs("div",{className:"d-md-none mt-3 border-top pt-3",children:[x.jsx(C,{isMobile:!0}),d&&d.isAuthenticated?x.jsxs("div",{className:"mt-3 d-flex flex-column gap-2",children:[x.jsxs("span",{className:"text-dark mb-2",children:["Hi, ",x.jsx("strong",{children:d.user?.name||d.user?.email})]}),x.jsx(n,{to:"admin"===m?"/admin":`/dashboard/${m}`,className:"btn btn-primary btn-sm",onClick:()=>c(!1),children:"Dashboard"}),x.jsx(n,{to:"/settings",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!1),children:"Settings"}),x.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>{d.logout(),c(!1)},children:"Logout"})]}):x.jsxs("div",{className:"mt-3 d-flex flex-column gap-2",children:[x.jsx("button",{type:"button",className:"btn btn-link text-muted",onClick:()=>{l("login"),t(!0),c(!1)},children:"Sign In"}),x.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{i("nonprofit"),l("signup"),t(!0),c(!1)},children:"Sign Up as Nonprofit"}),x.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{i("researcher"),l("signup"),t(!0),c(!1)},children:"Sign Up as Researcher"})]})]})]}),x.jsx(_,{open:e,onClose:()=>t(!1),children:"signup"===r?x.jsx(w,{role:a,onClose:()=>t(!1)}):x.jsx(k,{onClose:()=>t(!1),onSuccess:e=>{}})})]})}function A(){return x.jsx("section",{className:"py-4",children:x.jsx("div",{className:"container card p-4 mb-3",children:x.jsxs("div",{className:"row align-items-center",children:[x.jsxs("div",{className:"col-md-7",children:[x.jsx("h1",{className:"h3",children:"Evidence, on demand. Match nonprofits with qualified researchers."}),x.jsx("p",{className:"text-muted",children:"Find research partners who can help design, run, and analyze social projects."}),x.jsxs("div",{className:"mt-3",children:[x.jsx("a",{href:"#",className:"btn btn-primary me-2",children:"I'm a Nonprofit"}),x.jsx("a",{href:"#",className:"btn btn-outline-primary",children:"I'm a Researcher"})]})]}),x.jsx("div",{className:"col-md-5 text-center",children:x.jsx("div",{className:"video-placeholder mx-auto",children:"Optional explainer video"})})]})})})}const E=[{title:"Create profile",desc:"Tell us who you are, your skills or needs."},{title:"Post or accept a brief",desc:"Nonprofits post short briefs; researchers can apply."},{title:"Match & message",desc:"Connect with your match, discuss scope and deliverables."},{title:"Deliverables & feedback",desc:"Submit outcomes and collect feedback for future matches."}];function T(){return x.jsx("section",{id:"how",className:"py-3",children:x.jsxs("div",{className:"container",children:[x.jsx("h2",{className:"h4",children:"How it works"}),x.jsx("div",{className:"row g-3 mt-3",children:E.map((e,t)=>x.jsx("div",{className:"col-6 col-md-3",children:x.jsxs("div",{className:"card h-100 text-center p-3",children:[x.jsx("div",{className:"badge bg-primary rounded-circle mx-auto mb-2",style:{width:36,height:36,lineHeight:"36px"},children:t+1}),x.jsx("h5",{className:"h6",children:e.title}),x.jsx("p",{className:"small text-muted",children:e.desc})]})},t))})]})})}function P(){return x.jsx("section",{className:"py-3",children:x.jsxs("div",{className:"container card p-3",children:[x.jsx("h4",{className:"mb-3",children:"Trusted by"}),x.jsxs("div",{className:"d-flex gap-3 mb-3 flex-wrap",children:[x.jsx("div",{className:"border rounded px-3 py-2",children:"University A"}),x.jsx("div",{className:"border rounded px-3 py-2",children:"Foundation B"}),x.jsx("div",{className:"border rounded px-3 py-2",children:"University C"})]}),x.jsxs("div",{className:"row",children:[x.jsx("div",{className:"col-md-6",children:x.jsx("div",{className:"card p-3 mb-2",children:x.jsx("p",{className:"mb-0",children:'"We found an amazing research partner in 2 weeks." — Nonprofit Director'})})}),x.jsx("div",{className:"col-md-6",children:x.jsx("div",{className:"card p-3 mb-2",children:x.jsx("p",{className:"mb-0",children:'"A streamlined way to find field-ready projects." — Researcher'})})})]})]})})}const O=[{label:"Matches",value:"1,234"},{label:"Avg time to match",value:"10 days"},{label:"Projects completed",value:"498"},{label:"Money saved",value:"$2.3M"},{label:"Sectors served",value:"12"}];function D(){return x.jsx("section",{className:"py-3",children:x.jsxs("div",{className:"container",children:[x.jsx("h4",{children:"Impact"}),x.jsx("div",{className:"row g-3 mt-2",children:O.map((e,t)=>x.jsx("div",{className:"col-6 col-md-2",children:x.jsxs("div",{className:"card text-center p-2",children:[x.jsx("div",{className:"h5 mb-0",children:e.value}),x.jsx("div",{className:"small text-muted",children:e.label})]})},t))})]})})}const $=[{title:"Summer Learning Evaluation",tags:["education","RCT","6 months"],budget:"$5k-$10k"},{title:"Food Access Survey",tags:["survey","mixed-methods","3 months"],budget:"$2k-$5k"},{title:"Housing Intervention Analysis",tags:["quasi-experimental","12 months"],budget:"$10k+"}];function L(){return x.jsx("section",{className:"py-3",children:x.jsxs("div",{className:"container-center",children:[x.jsx("h4",{children:"Featured projects"}),x.jsx("div",{className:"row g-3 mt-2",children:$.map((e,t)=>x.jsx("div",{className:"col-12 col-md-4",children:x.jsxs("div",{className:"card p-3 h-100",children:[x.jsx("h5",{children:e.title}),x.jsx("div",{className:"text-muted small",children:e.tags.join(" · ")}),x.jsx("div",{className:"mt-2",children:x.jsx("strong",{children:e.budget})})]})},t))})]})})}function F(){return x.jsx("section",{className:"py-3",children:x.jsxs("div",{className:"container-center card p-3",children:[x.jsx("h5",{children:"Explore available expertise"}),x.jsxs("div",{className:"input-group mt-2","aria-hidden":!0,children:[x.jsx("input",{readOnly:!0,className:"form-control",placeholder:"e.g. focus area: education · methods: survey, RCT · geography: Midwest"}),x.jsx("button",{className:"btn btn-outline-secondary",children:"Search"})]}),x.jsxs("div",{className:"mt-2 small text-muted",children:[x.jsx("strong",{children:"Focus areas:"})," ",x.jsx("span",{className:"badge bg-light text-dark",children:"Education"})," ",x.jsx("span",{className:"badge bg-light text-dark",children:"Health"})," ",x.jsx("span",{className:"badge bg-light text-dark",children:"Housing"})," ",x.jsx("span",{className:"badge bg-light text-dark",children:"Environment"})]})]})})}function I(){return x.jsx("section",{className:"py-3",children:x.jsxs("div",{className:"container-center card p-3 d-flex flex-column flex-md-row align-items-center justify-content-between gap-3",children:[x.jsxs("div",{children:[x.jsx("h5",{className:"mb-1",children:"Stay updated"}),x.jsx("p",{className:"mb-0 text-muted",children:"Get updates, invites to pilot programs, and scholarships for student RAs."})]}),x.jsxs("form",{className:"d-flex",onSubmit:e=>e.preventDefault(),children:[x.jsx("input",{placeholder:"Your email",type:"email",className:"form-control me-2"}),x.jsx("button",{className:"btn btn-primary",children:"Subscribe"})]})]})})}function z(){return x.jsx("footer",{className:"bg-dark text-white py-5 mt-4",children:x.jsxs("div",{className:"container-center d-flex flex-column flex-md-row justify-content-between gap-3 align-items-start",children:[x.jsxs("div",{children:[x.jsx("a",{href:"#contact",className:"text-white me-3",children:"Contact"}),x.jsx("a",{href:"#privacy",className:"text-white me-3",children:"Privacy"}),x.jsx("a",{href:"#terms",className:"text-white me-3",children:"Terms"}),x.jsx("a",{href:"#accessibility",className:"text-white me-3",children:"Accessibility"}),x.jsx("a",{href:"#press",className:"text-white",children:"Press"})]}),x.jsxs("div",{className:"text-muted",style:{maxWidth:"360px"},children:[x.jsx("strong",{children:"Compliance & ethics"}),x.jsx("p",{children:"We provide IRB/FERPA guidance and data governance resources for projects involving human subjects. See our resources page for details."})]}),x.jsx("div",{children:"@trident"})]})})}function M(){return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content",children:[x.jsx(A,{}),x.jsx(T,{}),x.jsx(P,{}),x.jsx(D,{}),x.jsx(L,{}),x.jsx(F,{}),x.jsx(I,{})]}),x.jsx(z,{})]})}function R({projectId:e,onSuccess:t,onCancel:a}){const[i,n]=s.useState({title:"",problem:"",outcomes:"",methods_required:"",timeline:"",budget_min:"",data_sensitivity:"",status:"draft"}),[r,l]=s.useState(!1),[o,c]=s.useState(!1),[d,m]=s.useState(null),h=!!e;s.useEffect(()=>{h&&u()},[e]);const u=async()=>{l(!0);try{const t=localStorage.getItem("trident_token"),s=await fetch(`/api/projects/${e}`,{headers:{Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch project");n(a.project)}catch(t){m(t.message)}finally{l(!1)}},p=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))};return r?x.jsx("div",{className:"d-flex justify-content-center p-4",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h5",{className:"card-title mb-4",children:h?"Edit Project":"Create New Project"}),d&&x.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[d,x.jsx("button",{type:"button",className:"btn-close",onClick:()=>m(null),"aria-label":"Close"})]}),x.jsxs("form",{onSubmit:async s=>{s.preventDefault(),m(null),c(!0);try{const s=localStorage.getItem("trident_token"),a=h?`/api/projects/${e}`:"/api/projects",n=h?"PUT":"POST",r={...i,budget_min:i.budget_min?parseFloat(i.budget_min):null},l=await fetch(a,{method:n,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(r)}),o=await l.json();if(!l.ok)throw new Error(o.error||`Failed to ${h?"update":"create"} project`);t&&t(o.project)}catch(a){m(a.message)}finally{c(!1)}},children:[x.jsxs("div",{className:"mb-3",children:[x.jsxs("label",{htmlFor:"title",className:"form-label",children:["Project Title ",x.jsx("span",{className:"text-danger",children:"*"})]}),x.jsx("input",{type:"text",className:"form-control",id:"title",name:"title",value:i.title,onChange:p,required:!0,maxLength:255,placeholder:"Enter a descriptive project title"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"problem",className:"form-label",children:"Problem Statement"}),x.jsx("textarea",{className:"form-control",id:"problem",name:"problem",value:i.problem,onChange:p,rows:3,maxLength:255,placeholder:"Describe the problem or need this project addresses"}),x.jsx("div",{className:"form-text",children:"Clearly articulate the challenge your organization is facing"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"outcomes",className:"form-label",children:"Expected Outcomes"}),x.jsx("textarea",{className:"form-control",id:"outcomes",name:"outcomes",value:i.outcomes,onChange:p,rows:3,maxLength:255,placeholder:"What deliverables or results do you expect?"}),x.jsx("div",{className:"form-text",children:"Describe what success looks like for this project"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"methods_required",className:"form-label",children:"Methods & Expertise Required"}),x.jsx("textarea",{className:"form-control",id:"methods_required",name:"methods_required",value:i.methods_required,onChange:p,rows:3,maxLength:255,placeholder:"e.g., Survey design, statistical analysis, qualitative interviews"}),x.jsx("div",{className:"form-text",children:"List the research methods and skills needed"})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"timeline",className:"form-label",children:"Timeline"}),x.jsx("input",{type:"text",className:"form-control",id:"timeline",name:"timeline",value:i.timeline,onChange:p,maxLength:255,placeholder:"e.g., 6 months, Q1 2025"}),x.jsx("div",{className:"form-text",children:"When should this project be completed?"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"budget_min",className:"form-label",children:"Budget (USD)"}),x.jsx("input",{type:"number",className:"form-control",id:"budget_min",name:"budget_min",value:i.budget_min,onChange:p,min:"0",step:"0.01",placeholder:"e.g., 10000"}),x.jsx("div",{className:"form-text",children:"Minimum budget available for this project"})]})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"data_sensitivity",className:"form-label",children:"Data Sensitivity"}),x.jsxs("select",{className:"form-select",id:"data_sensitivity",name:"data_sensitivity",value:i.data_sensitivity,onChange:p,children:[x.jsx("option",{value:"",children:"Select sensitivity level"}),x.jsx("option",{value:"Low",children:"Low - Public data only"}),x.jsx("option",{value:"Medium",children:"Medium - Some confidential data"}),x.jsx("option",{value:"High",children:"High - Highly sensitive data"})]}),x.jsx("div",{className:"form-text",children:"Level of data sensitivity involved"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"status",className:"form-label",children:"Project Status"}),x.jsxs("select",{className:"form-select",id:"status",name:"status",value:i.status,onChange:p,children:[x.jsx("option",{value:"draft",children:"Draft - Not visible to researchers"}),x.jsx("option",{value:"open",children:"Open - Accepting applications"}),x.jsx("option",{value:"in_progress",children:"In Progress - Work underway"}),x.jsx("option",{value:"completed",children:"Completed - Project finished"}),x.jsx("option",{value:"cancelled",children:"Cancelled - Project cancelled"})]}),x.jsx("div",{className:"form-text",children:"Control project visibility and status"})]})]}),x.jsxs("div",{className:"d-flex gap-2",children:[x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o||!i.title.trim(),children:o?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),h?"Updating...":"Creating..."]}):x.jsx(x.Fragment,{children:h?"Update Project":"Create Project"})}),a&&x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,disabled:o,children:"Cancel"})]})]})]})})}const B=e=>`${window.location.origin}${e.startsWith("/api/")?e:e.startsWith("/")?`/api${e}`:`/api/${e}`}`,q=({projectId:e,milestone:t,onSuccess:a,onCancel:i})=>{const[n,r]=s.useState({name:"",description:"",due_date:"",status:"pending"}),[l,o]=s.useState(!1),[c,d]=s.useState("");s.useEffect(()=>{t&&r({name:t.name||"",description:t.description||"",due_date:t.due_date||"",status:t.status||"pending"})},[t]);const m=e=>{const{name:t,value:s}=e.target;r(e=>({...e,[t]:s}))},h=(new Date).toISOString().split("T")[0];return x.jsxs("form",{onSubmit:async s=>{s.preventDefault(),d(""),o(!0);try{const s=localStorage.getItem("trident_token"),i=B(t?`/api/projects/${e}/milestones/${t.id}`:`/api/projects/${e}/milestones`),r=t?"PUT":"POST",l=await fetch(i,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(n)}),o=await l.json();if(!l.ok)throw new Error(o.error||"Failed to save milestone");a(o.milestone)}catch(i){d(i.message)}finally{o(!1)}},children:[c&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("label",{htmlFor:"name",className:"form-label",children:["Milestone Name ",x.jsx("span",{className:"text-danger",children:"*"})]}),x.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:n.name,onChange:m,placeholder:"e.g., Complete User Research",required:!0,maxLength:255,disabled:l}),x.jsx("div",{className:"form-text",children:"Clear, action-oriented name for this milestone"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),x.jsx("textarea",{className:"form-control",id:"description",name:"description",value:n.description,onChange:m,rows:"3",placeholder:"Detailed description of what needs to be accomplished...",disabled:l})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"due_date",className:"form-label",children:"Due Date"}),x.jsx("input",{type:"date",className:"form-control",id:"due_date",name:"due_date",value:n.due_date,onChange:m,min:t?void 0:h,disabled:l}),x.jsx("div",{className:"form-text",children:!t&&"Due date must be today or in the future"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),x.jsxs("select",{className:"form-select",id:"status",name:"status",value:n.status,onChange:m,disabled:l,children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:l,children:"Cancel"}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):t?"Update Milestone":"Create Milestone"})]})]})},H=({projectId:e})=>{const{token:t}=y(),[a,i]=s.useState([]),[n,r]=s.useState(null),[l,o]=s.useState(!0),[c,d]=s.useState(""),[m,h]=s.useState("all"),[u,p]=s.useState(!1),[f,b]=s.useState(null);s.useEffect(()=>{g(),j()},[e,m]);const g=async()=>{try{o(!0);let s=B(`/api/projects/${e}/milestones`);"all"!==m&&(s+="overdue"===m?"?overdue=true":`?status=${m}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch milestones");const n=await a.json();i(n.milestones||[])}catch(s){d(s.message)}finally{o(!1)}},j=async()=>{try{const s=await fetch(B(`/api/projects/${e}/milestones/stats`),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const e=await s.json();r(e.stats)}}catch(s){console.error("Failed to fetch stats:",s)}},v=async(s,n)=>{try{const r=await fetch(B(`/api/projects/${e}/milestones/${s}`),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:n})});if(!r.ok)throw new Error("Failed to update status");const l=await r.json();i(a.map(e=>e.id===s?l.milestone:e)),j(),d("")}catch(r){d(r.message)}},N=e=>{const t=e.computed_status||e.status;return x.jsx("span",{className:`badge ${{pending:"bg-secondary",in_progress:"bg-primary",completed:"bg-success",cancelled:"bg-dark",overdue:"bg-danger"}[t]||"bg-secondary"}`,children:{pending:"Pending",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",overdue:"Overdue"}[t]||t})},_=e=>{if(!e.due_date||"completed"===e.status)return null;const t=e.days_until_due;return null===t?null:t<0?x.jsxs("span",{className:"badge bg-danger ms-2",children:[Math.abs(t)," days overdue"]}):0===t?x.jsx("span",{className:"badge bg-warning text-dark ms-2",children:"Due today"}):t<=7?x.jsxs("span",{className:"badge bg-warning text-dark ms-2",children:["Due in ",t," days"]}):x.jsxs("span",{className:"badge bg-info ms-2",children:[t," days remaining"]})},w=e=>{if(!e)return"No due date";const t=e.slice(0,10);return new Date(`${t}T00:00:00`).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return l&&0===a.length?x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):x.jsxs("div",{className:"milestone-tracker",children:[c&&x.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[c,x.jsx("button",{type:"button",className:"btn-close",onClick:()=>d("")})]}),n&&x.jsxs("div",{className:"row mb-4",children:[x.jsx("div",{className:"col-md-3",children:x.jsx("div",{className:"card bg-light",children:x.jsxs("div",{className:"card-body text-center",children:[x.jsx("h3",{className:"mb-0",children:n.total}),x.jsx("small",{className:"text-muted",children:"Total"})]})})}),x.jsx("div",{className:"col-md-3",children:x.jsx("div",{className:"card bg-success text-white",children:x.jsxs("div",{className:"card-body text-center",children:[x.jsxs("h3",{className:"mb-0",children:[n.completion_rate,"%"]}),x.jsx("small",{children:"Completion Rate"})]})})}),x.jsx("div",{className:"col-md-3",children:x.jsx("div",{className:"card bg-primary text-white",children:x.jsxs("div",{className:"card-body text-center",children:[x.jsx("h3",{className:"mb-0",children:n.in_progress}),x.jsx("small",{children:"In Progress"})]})})}),x.jsx("div",{className:"col-md-3",children:x.jsx("div",{className:"card bg-danger text-white",children:x.jsxs("div",{className:"card-body text-center",children:[x.jsx("h3",{className:"mb-0",children:n.overdue}),x.jsx("small",{children:"Overdue"})]})})})]}),x.jsxs("div",{className:"mb-3 d-flex justify-content-between align-items-center",children:[x.jsxs("div",{className:"btn-group",role:"group",children:[x.jsx("button",{className:"btn btn-sm "+("all"===m?"btn-primary":"btn-outline-primary"),onClick:()=>h("all"),children:"All"}),x.jsx("button",{className:"btn btn-sm "+("pending"===m?"btn-primary":"btn-outline-primary"),onClick:()=>h("pending"),children:"Pending"}),x.jsx("button",{className:"btn btn-sm "+("in_progress"===m?"btn-primary":"btn-outline-primary"),onClick:()=>h("in_progress"),children:"In Progress"}),x.jsx("button",{className:"btn btn-sm "+("completed"===m?"btn-primary":"btn-outline-primary"),onClick:()=>h("completed"),children:"Completed"}),x.jsx("button",{className:"btn btn-sm "+("overdue"===m?"btn-primary":"btn-outline-primary"),onClick:()=>h("overdue"),children:"Overdue"})]}),x.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{b(null),p(!0)},children:"+ Add Milestone"})]}),0===a.length?x.jsxs("div",{className:"text-center py-5 text-muted",children:[x.jsx("p",{children:"No milestones found for this filter."}),"all"===m&&x.jsx("button",{className:"btn btn-primary",onClick:()=>p(!0),children:"Create Your First Milestone"})]}):x.jsx("div",{className:"list-group",children:a.map(s=>x.jsx("div",{className:"list-group-item",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{className:"flex-grow-1",children:[x.jsxs("div",{className:"d-flex align-items-center mb-2",children:[x.jsx("h6",{className:"mb-0 me-2",children:s.name}),N(s),_(s)]}),s.description&&x.jsx("p",{className:"mb-2 text-muted small",children:s.description}),x.jsxs("div",{className:"small text-muted",children:[x.jsxs("span",{children:["Due: ",w(s.due_date)]}),s.completed_at&&x.jsxs("span",{className:"ms-3",children:["Completed: ",new Date(s.completed_at).toLocaleDateString()]})]})]}),x.jsxs("div",{className:"d-flex flex-column gap-2 ms-3",children:["completed"!==s.status&&"cancelled"!==s.status&&x.jsxs("div",{className:"dropdown",children:[x.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:"Change Status"}),x.jsxs("ul",{className:"dropdown-menu",children:["pending"!==s.status&&x.jsx("li",{children:x.jsx("button",{className:"dropdown-item",onClick:()=>v(s.id,"pending"),children:"Mark as Pending"})}),"in_progress"!==s.status&&x.jsx("li",{children:x.jsx("button",{className:"dropdown-item",onClick:()=>v(s.id,"in_progress"),children:"Mark as In Progress"})}),x.jsx("li",{children:x.jsx("button",{className:"dropdown-item",onClick:()=>v(s.id,"completed"),children:"Mark as Completed"})}),x.jsx("li",{children:x.jsx("hr",{className:"dropdown-divider"})}),x.jsx("li",{children:x.jsx("button",{className:"dropdown-item text-danger",onClick:()=>v(s.id,"cancelled"),children:"Cancel Milestone"})})]})]}),x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{b(s),p(!0)},children:"Edit"}),x.jsx("button",{className:"btn btn-outline-danger",onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this milestone?"))try{if(!(await fetch(B(`/api/projects/${e}/milestones/${s}`),{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to delete milestone");i(a.filter(e=>e.id!==s)),j(),d("")}catch(n){d(n.message)}})(s.id),children:"Delete"})]})]})]})},s.id))}),u&&x.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:x.jsx("div",{className:"modal-dialog",children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h5",{className:"modal-title",children:f?"Edit Milestone":"Add New Milestone"}),x.jsx("button",{type:"button",className:"btn-close",onClick:()=>{p(!1),b(null)}})]}),x.jsx("div",{className:"modal-body",children:x.jsx(q,{projectId:e,milestone:f,onSuccess:e=>{i(f?a.map(t=>t.id===e.id?e:t):[e,...a]),j(),p(!1),b(null),d("")},onCancel:()=>{p(!1),b(null)}})})]})})})]})};function U({onEdit:e,onRefresh:t}){const[a,i]=s.useState([]),[n,r]=s.useState(!0),[l,o]=s.useState(null),[c,d]=s.useState(""),[m,h]=s.useState(null),[u,p]=s.useState(null);s.useEffect(()=>{f()},[c]),s.useEffect(()=>{t&&f()},[t]);const f=async()=>{r(!0),o(null);try{const e=localStorage.getItem("trident_token"),t=c?`/api/projects?status=${c}`:"/api/projects",s=await fetch(t,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch projects");i(a.projects)}catch(e){o(e.message)}finally{r(!1)}};return n?x.jsx("div",{className:"d-flex justify-content-center p-4",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):l?x.jsxs("div",{className:"alert alert-danger",role:"alert",children:[x.jsx("strong",{children:"Error:"})," ",l,x.jsx("button",{className:"btn btn-sm btn-outline-danger ms-3",onClick:f,children:"Retry"})]}):x.jsxs("div",{children:[x.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[x.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[x.jsx("label",{htmlFor:"statusFilter",className:"form-label mb-0",children:"Filter:"}),x.jsxs("select",{id:"statusFilter",className:"form-select form-select-sm",style:{width:"auto"},value:c,onChange:e=>d(e.target.value),children:[x.jsx("option",{value:"",children:"All Projects"}),x.jsx("option",{value:"draft",children:"Draft"}),x.jsx("option",{value:"pending_review",children:"Pending Review"}),x.jsx("option",{value:"approved",children:"Approved"}),x.jsx("option",{value:"needs_revision",children:"Needs Revision"}),x.jsx("option",{value:"rejected",children:"Rejected"}),x.jsx("option",{value:"open",children:"Open"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:f,children:[x.jsx("i",{className:"bi bi-arrow-clockwise me-1"}),"Refresh"]})]}),x.jsxs("p",{className:"text-muted mb-3",children:[a.length," ",1===a.length?"project":"projects"," found"]}),0===a.length?x.jsxs("div",{className:"alert alert-info",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),"No projects found. Create your first project to get started!"]}):x.jsx("div",{className:"row",children:a.map(t=>{return x.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:x.jsxs("div",{className:"card h-100",children:[x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[x.jsx("h5",{className:"card-title mb-0",children:t.title}),x.jsx("span",{className:`badge bg-${a=t.status,{draft:"secondary",pending_review:"warning",approved:"success",needs_revision:"danger",rejected:"dark",open:"success",in_progress:"primary",completed:"info",cancelled:"danger"}[a]||"secondary"}`,children:t.status.replace("_"," ")})]}),t.problem&&x.jsxs("p",{className:"card-text text-muted small mb-2",children:[x.jsx("strong",{children:"Problem:"})," ",t.problem.substring(0,100),t.problem.length>100&&"..."]}),t.methods_required&&x.jsxs("p",{className:"card-text small mb-1",children:[x.jsx("strong",{children:"Methods:"})," ",t.methods_required.substring(0,80),t.methods_required.length>80&&"..."]}),x.jsxs("div",{className:"row small text-muted mt-2",children:[t.timeline&&x.jsxs("div",{className:"col-6 mb-1",children:[x.jsx("i",{className:"bi bi-clock me-1"}),t.timeline]}),t.budget_min&&x.jsxs("div",{className:"col-6 mb-1",children:[x.jsx("i",{className:"bi bi-currency-dollar me-1"}),(s=t.budget_min,s?`$${parseFloat(s).toLocaleString()}`:"Not specified")]}),t.data_sensitivity&&x.jsxs("div",{className:"col-12 mb-1",children:[x.jsx("i",{className:"bi bi-shield-check me-1"}),t.data_sensitivity," sensitivity"]})]})]}),x.jsxs("div",{className:"card-footer bg-transparent",children:[("draft"===t.status||"needs_revision"===t.status)&&x.jsxs("button",{className:"btn btn-sm btn-success w-100 mb-2",onClick:()=>(async e=>{if(confirm("Submit this project for admin review?"))try{const t=localStorage.getItem("trident_token"),s=await fetch(`/api/projects/${e}/submit-for-review`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to submit for review");alert(a.message),f()}catch(t){alert(`Error: ${t.message}`)}})(t.project_id),children:[x.jsx("i",{className:"bi bi-send me-1"}),"Submit for Review"]}),x.jsxs("div",{className:"d-flex gap-2",children:[x.jsxs("button",{className:"btn btn-sm btn-outline-secondary flex-grow-1",onClick:()=>p(t),children:[x.jsx("i",{className:"bi bi-list-check me-1"}),"Milestones"]}),x.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>e&&e(t.project_id),disabled:"pending_review"===t.status,children:[x.jsx("i",{className:"bi bi-pencil me-1"}),"Edit"]}),x.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone.")){h(e);try{const t=localStorage.getItem("trident_token"),s=await fetch(`/api/projects/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete project");i(t=>t.filter(t=>t.project_id!==e))}catch(t){alert(`Error deleting project: ${t.message}`)}finally{h(null)}}})(t.project_id),disabled:m===t.project_id||"pending_review"===t.status,children:m===t.project_id?x.jsx("span",{className:"spinner-border spinner-border-sm",role:"status"}):x.jsx("i",{className:"bi bi-trash"})})]})]})]})},t.project_id);var s,a})}),u&&x.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:x.jsx("div",{className:"modal-dialog modal-xl",children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("h5",{className:"modal-title",children:["Milestones - ",u.title]}),x.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(null)})]}),x.jsx("div",{className:"modal-body",children:x.jsx(H,{projectId:u.project_id})})]})})})]})}const W=({user:e,profile:t,onUpdate:a})=>{const[i,n]=s.useState(!1),[r,l]=s.useState({affiliation:t?.affiliation||"",domains:t?.domains||"",methods:t?.methods||"",tools:t?.tools||"",availability:t?.availability||""}),o=async e=>{e.preventDefault(),await a(r),n(!1)};return i?x.jsxs("form",{onSubmit:o,children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Name"}),x.jsx("p",{className:"form-control-plaintext",children:e.name})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Email"}),x.jsx("p",{className:"form-control-plaintext",children:e.email})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Affiliation/Institution"}),x.jsx("input",{type:"text",className:"form-control",value:r.affiliation,onChange:e=>l({...r,affiliation:e.target.value}),placeholder:"e.g., Harvard University, MIT"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Research Domains"}),x.jsx("input",{type:"text",className:"form-control",value:r.domains,onChange:e=>l({...r,domains:e.target.value}),placeholder:"e.g., Machine Learning, Public Health, Data Science"}),x.jsx("small",{className:"text-muted",children:"Separate multiple domains with commas"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Research Methods"}),x.jsx("input",{type:"text",className:"form-control",value:r.methods,onChange:e=>l({...r,methods:e.target.value}),placeholder:"e.g., Quantitative Analysis, Qualitative Research"}),x.jsx("small",{className:"text-muted",children:"Separate multiple methods with commas"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Tools & Technologies"}),x.jsx("input",{type:"text",className:"form-control",value:r.tools,onChange:e=>l({...r,tools:e.target.value}),placeholder:"e.g., Python, R, SPSS, Tableau"}),x.jsx("small",{className:"text-muted",children:"Separate multiple tools with commas"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Availability"}),x.jsx("input",{type:"text",className:"form-control",value:r.availability,onChange:e=>l({...r,availability:e.target.value}),placeholder:"e.g., 10-20 hours/week, Flexible"})]}),x.jsxs("div",{className:"d-flex gap-2",children:[x.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"}),x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"})]})]}):x.jsxs("div",{children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Name"}),x.jsx("p",{className:"mb-2",children:e.name})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Email"}),x.jsx("p",{className:"mb-2",children:e.email})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Role"}),x.jsx("p",{className:"mb-2",children:x.jsx("span",{className:"badge bg-info",children:e.role})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Affiliation/Institution"}),x.jsx("p",{className:"mb-2",children:t?.affiliation||x.jsx("em",{className:"text-muted",children:"Not specified"})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Research Domains"}),x.jsx("p",{className:"mb-2",children:t?.domains||x.jsx("em",{className:"text-muted",children:"Not specified"})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Research Methods"}),x.jsx("p",{className:"mb-2",children:t?.methods||x.jsx("em",{className:"text-muted",children:"Not specified"})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Tools & Technologies"}),x.jsx("p",{className:"mb-2",children:t?.tools||x.jsx("em",{className:"text-muted",children:"Not specified"})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label fw-bold",children:"Availability"}),x.jsx("p",{className:"mb-2",children:t?.availability||x.jsx("em",{className:"text-muted",children:"Not specified"})})]}),x.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>n(!0),children:[x.jsx("i",{className:"bi bi-pencil me-1"}),"Edit Profile"]})]})},V=({token:e})=>{const[t,a]=s.useState([]),[i,n]=s.useState(null),[r,l]=s.useState(null),[o,c]=s.useState(!0);s.useEffect(()=>{d()},[]);const d=async()=>{try{const t=await fetch("/api/researchers/me/academic",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok&&a(s.academics)}catch(t){console.error("Failed to fetch academics:",t)}finally{c(!1)}},m=async()=>{try{const s=await fetch(`/api/researchers/me/academic/${i.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({degree:i.degree,field:i.field,institution:i.institution,year:i.year})}),r=await s.json();s.ok?(a(t.map(e=>e.id===i.id?r.academic:e)),n(null)):alert(r.error||"Failed to update academic entry")}catch(s){alert("Failed to update academic entry")}};return o?x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border"})}):x.jsxs("div",{children:[x.jsx("h5",{className:"mb-3",children:"Academic Background"}),0===t.length&&!r&&x.jsxs("div",{className:"alert alert-info",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),'No academic entries added yet. Click "Add Academic Entry" to get started.']}),t.map(s=>x.jsx("div",{className:"card mb-3",children:i?.id===s.id?x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Degree"}),x.jsx("input",{type:"text",className:"form-control",value:i.degree,onChange:e=>n({...i,degree:e.target.value}),placeholder:"e.g., Ph.D., M.Sc., B.A."})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Field of Study"}),x.jsx("input",{type:"text",className:"form-control",value:i.field,onChange:e=>n({...i,field:e.target.value}),placeholder:"e.g., Computer Science"})]}),x.jsxs("div",{className:"col-md-8",children:[x.jsx("label",{className:"form-label",children:"Institution"}),x.jsx("input",{type:"text",className:"form-control",value:i.institution,onChange:e=>n({...i,institution:e.target.value}),placeholder:"e.g., Harvard University"})]}),x.jsxs("div",{className:"col-md-4",children:[x.jsx("label",{className:"form-label",children:"Year"}),x.jsx("input",{type:"text",className:"form-control",value:i.year,onChange:e=>n({...i,year:e.target.value}),placeholder:"e.g., 2020"})]})]}),x.jsxs("div",{className:"mt-3",children:[x.jsxs("button",{className:"btn btn-primary btn-sm me-2",onClick:m,children:[x.jsx("i",{className:"bi bi-check-lg me-1"}),"Save"]}),x.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n(null),children:"Cancel"})]})]}):x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsxs("h6",{className:"mb-1",children:[s.degree," ",s.field&&`in ${s.field}`]}),x.jsx("p",{className:"mb-1 text-muted",children:s.institution}),s.year&&x.jsx("small",{className:"text-muted",children:s.year})]}),x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsx("button",{className:"btn btn-outline-primary",onClick:()=>(e=>{n({...e})})(s),children:x.jsx("i",{className:"bi bi-pencil"})}),x.jsx("button",{className:"btn btn-outline-danger",onClick:()=>(async s=>{if(confirm("Delete this academic entry?"))try{const i=await fetch(`/api/researchers/me/academic/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});if(i.ok)a(t.filter(e=>e.id!==s));else{const e=await i.json();alert(e.error||"Failed to delete academic entry")}}catch(i){alert("Failed to delete academic entry")}})(s.id),children:x.jsx("i",{className:"bi bi-trash"})})]})]})})},s.id)),r&&x.jsx("div",{className:"card mb-3 border-primary",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h6",{className:"mb-3",children:"Add New Academic Entry"}),x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Degree *"}),x.jsx("input",{type:"text",className:"form-control",value:r.degree,onChange:e=>l({...r,degree:e.target.value}),placeholder:"e.g., Ph.D., M.Sc., B.A."})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Field of Study"}),x.jsx("input",{type:"text",className:"form-control",value:r.field,onChange:e=>l({...r,field:e.target.value}),placeholder:"e.g., Computer Science"})]}),x.jsxs("div",{className:"col-md-8",children:[x.jsx("label",{className:"form-label",children:"Institution *"}),x.jsx("input",{type:"text",className:"form-control",value:r.institution,onChange:e=>l({...r,institution:e.target.value}),placeholder:"e.g., Harvard University"})]}),x.jsxs("div",{className:"col-md-4",children:[x.jsx("label",{className:"form-label",children:"Year"}),x.jsx("input",{type:"text",className:"form-control",value:r.year,onChange:e=>l({...r,year:e.target.value}),placeholder:"e.g., 2020"})]})]}),x.jsxs("div",{className:"mt-3",children:[x.jsxs("button",{className:"btn btn-primary btn-sm me-2",onClick:async()=>{if(r.degree&&r.institution)try{const s=await fetch("/api/researchers/me/academic",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await s.json();s.ok?(a([...t,i.academic]),l(null)):alert(i.error||"Failed to add academic entry")}catch(s){alert("Failed to add academic entry")}},children:[x.jsx("i",{className:"bi bi-plus-lg me-1"}),"Add Entry"]}),x.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>l(null),children:"Cancel"})]})]})}),!r&&x.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>{l({degree:"",institution:"",year:"",field:""})},children:[x.jsx("i",{className:"bi bi-plus-lg me-1"}),"Add Academic Entry"]})]})},Y=({token:e})=>{const[t,a]=s.useState([]),[i,n]=s.useState(null),[r,l]=s.useState(null),[o,c]=s.useState(!0);s.useEffect(()=>{d()},[]);const d=async()=>{try{const t=await fetch("/api/researchers/me/certifications",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok&&a(s.certifications)}catch(t){console.error("Failed to fetch certifications:",t)}finally{c(!1)}},m=async()=>{try{const s=await fetch(`/api/researchers/me/certifications/${i.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({name:i.name,issuer:i.issuer,year:i.year,credential_id:i.credential_id})}),r=await s.json();s.ok?(a(t.map(e=>e.id===i.id?r.certification:e)),n(null)):alert(r.error||"Failed to update certification")}catch(s){alert("Failed to update certification")}};return o?x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border"})}):x.jsxs("div",{children:[x.jsx("h5",{className:"mb-3",children:"Certifications & Credentials"}),0===t.length&&!r&&x.jsxs("div",{className:"alert alert-info",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),'No certifications added yet. Click "Add Certification" to get started.']}),t.map(s=>x.jsx("div",{className:"card mb-3",children:i?.id===s.id?x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-8",children:[x.jsx("label",{className:"form-label",children:"Certification Name"}),x.jsx("input",{type:"text",className:"form-control",value:i.name,onChange:e=>n({...i,name:e.target.value}),placeholder:"e.g., Ethical Research Certification"})]}),x.jsxs("div",{className:"col-md-4",children:[x.jsx("label",{className:"form-label",children:"Year"}),x.jsx("input",{type:"text",className:"form-control",value:i.year,onChange:e=>n({...i,year:e.target.value}),placeholder:"e.g., 2024"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Issuing Organization"}),x.jsx("input",{type:"text",className:"form-control",value:i.issuer,onChange:e=>n({...i,issuer:e.target.value}),placeholder:"e.g., IRB Council"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Credential ID (Optional)"}),x.jsx("input",{type:"text",className:"form-control",value:i.credentialId,onChange:e=>n({...i,credentialId:e.target.value}),placeholder:"e.g., CERT-12345"})]})]}),x.jsxs("div",{className:"mt-3",children:[x.jsxs("button",{className:"btn btn-primary btn-sm me-2",onClick:m,children:[x.jsx("i",{className:"bi bi-check-lg me-1"}),"Save"]}),x.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n(null),children:"Cancel"})]})]}):x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsx("h6",{className:"mb-1",children:s.name}),x.jsx("p",{className:"mb-1 text-muted",children:s.issuer}),x.jsxs("small",{className:"text-muted",children:[s.year&&`Issued: ${s.year}`,s.credentialId&&` • ID: ${s.credentialId}`]})]}),x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsx("button",{className:"btn btn-outline-primary",onClick:()=>(e=>{n({...e})})(s),children:x.jsx("i",{className:"bi bi-pencil"})}),x.jsx("button",{className:"btn btn-outline-danger",onClick:()=>(async s=>{if(confirm("Delete this certification?"))try{const i=await fetch(`/api/researchers/me/certifications/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});if(i.ok)a(t.filter(e=>e.id!==s));else{const e=await i.json();alert(e.error||"Failed to delete certification")}}catch(i){alert("Failed to delete certification")}})(s.id),children:x.jsx("i",{className:"bi bi-trash"})})]})]})})},s.id)),r&&x.jsx("div",{className:"card mb-3 border-primary",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h6",{className:"mb-3",children:"Add New Certification"}),x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-8",children:[x.jsx("label",{className:"form-label",children:"Certification Name *"}),x.jsx("input",{type:"text",className:"form-control",value:r.name,onChange:e=>l({...r,name:e.target.value}),placeholder:"e.g., Ethical Research Certification"})]}),x.jsxs("div",{className:"col-md-4",children:[x.jsx("label",{className:"form-label",children:"Year"}),x.jsx("input",{type:"text",className:"form-control",value:r.year,onChange:e=>l({...r,year:e.target.value}),placeholder:"e.g., 2024"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Issuing Organization *"}),x.jsx("input",{type:"text",className:"form-control",value:r.issuer,onChange:e=>l({...r,issuer:e.target.value}),placeholder:"e.g., IRB Council"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label",children:"Credential ID (Optional)"}),x.jsx("input",{type:"text",className:"form-control",value:r.credentialId,onChange:e=>l({...r,credentialId:e.target.value}),placeholder:"e.g., CERT-12345"})]})]}),x.jsxs("div",{className:"mt-3",children:[x.jsxs("button",{className:"btn btn-primary btn-sm me-2",onClick:async()=>{if(r.name&&r.issuer)try{const s=await fetch("/api/researchers/me/certifications",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await s.json();s.ok?(a([...t,i.certification]),l(null)):alert(i.error||"Failed to add certification")}catch(s){alert("Failed to add certification")}},children:[x.jsx("i",{className:"bi bi-plus-lg me-1"}),"Add Certification"]}),x.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>l(null),children:"Cancel"})]})]})}),!r&&x.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>{l({name:"",issuer:"",year:"",credential_id:""})},children:[x.jsx("i",{className:"bi bi-plus-lg me-1"}),"Add Certification"]})]})};function J({user:e}){const{token:t}=y(),[a,i]=s.useState("personal"),[n,r]=s.useState(null),[l,o]=s.useState(!0);s.useEffect(()=>{c()},[]);const c=async()=>{try{const e=await fetch("/api/researchers/me",{headers:{Authorization:`Bearer ${t}`}}),s=await e.json();e.ok&&r(s.profile)}catch(e){console.error("Failed to fetch profile:",e)}finally{o(!1)}},d=async e=>{try{const s=await fetch("/api/researchers/me",{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();s.ok?(r(a.profile),alert("Profile updated successfully!")):alert(a.error||"Failed to update profile")}catch(s){alert("Failed to update profile")}};return x.jsxs("div",{className:"tab-pane-content",children:[x.jsx("h3",{className:"mb-3",children:"Profile Information"}),x.jsxs("ul",{className:"nav nav-pills mb-3",children:[x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("personal"===a?"active":""),onClick:()=>i("personal"),children:[x.jsx("i",{className:"bi bi-person me-1"}),"Personal"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("academic"===a?"active":""),onClick:()=>i("academic"),children:[x.jsx("i",{className:"bi bi-mortarboard me-1"}),"Academic"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("certifications"===a?"active":""),onClick:()=>i("certifications"),children:[x.jsx("i",{className:"bi bi-award me-1"}),"Certifications"]})})]}),x.jsx("div",{className:"card p-3",children:(()=>{if(l)return x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border"})});switch(a){case"personal":default:return x.jsx(W,{user:e,profile:n,onUpdate:d});case"academic":return x.jsx(V,{token:t});case"certifications":return x.jsx(Y,{token:t})}})()})]})}function X(){const{token:e}=y(),[t,a]=s.useState("current"),[i,n]=s.useState({current:[],completed:[],total:0}),[r,l]=s.useState(!0),[o,c]=s.useState("");s.useEffect(()=>{d()},[]);const d=async()=>{try{const t=await fetch("/api/researchers/me/projects",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok?n(s.projects):c(s.error||"Failed to fetch projects")}catch(t){console.error("Failed to fetch projects:",t),c("Failed to load projects")}finally{l(!1)}},m=e=>x.jsx("div",{className:"card mb-3",children:x.jsx("div",{className:"card-body",children:x.jsx("div",{className:"d-flex justify-content-between align-items-start",children:x.jsxs("div",{children:[x.jsxs("h5",{className:"card-title mb-2",children:[e.type||"Collaboration Agreement",x.jsx("span",{className:"badge ms-2 "+("completed"===e.status?"bg-success":"bg-primary"),children:"completed"===e.status?"Completed":"In Progress"})]}),e.organization&&x.jsxs("div",{className:"mb-2",children:[x.jsx("strong",{children:"Organization:"})," ",e.organization.name,e.organization.mission&&x.jsx("p",{className:"text-muted small mb-1",children:e.organization.mission}),e.organization.focus_tags&&x.jsx("div",{className:"mb-2",children:e.organization.focus_tags.split(",").map((e,t)=>x.jsx("span",{className:"badge bg-secondary me-1",children:e.trim()},t))})]}),e.value&&x.jsxs("p",{className:"mb-1",children:[x.jsx("strong",{children:"Value:"})," ",e.value]}),e.budget_info&&x.jsxs("p",{className:"mb-1",children:[x.jsx("strong",{children:"Budget:"})," ",e.budget_info]})]})})})},e.id);return r?x.jsxs("div",{className:"tab-pane-content",children:[x.jsx("h3",{className:"mb-3",children:"Projects Involved"}),x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]}):x.jsxs("div",{className:"tab-pane-content",children:[x.jsx("h3",{className:"mb-3",children:"Projects Involved"}),o&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),x.jsxs("ul",{className:"nav nav-tabs mb-3",children:[x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("current"===t?"active":""),onClick:()=>a("current"),children:["Current Participation (",i.current.length,")"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("completed"===t?"active":""),onClick:()=>a("completed"),children:["Completed (",i.completed.length,")"]})})]}),"current"===t&&x.jsx("div",{children:0===i.current.length?x.jsx("div",{className:"alert alert-info",children:"No current projects. Start collaborating with nonprofits to see your projects here!"}):i.current.map(m)}),"completed"===t&&x.jsx("div",{children:0===i.completed.length?x.jsx("div",{className:"alert alert-info",children:"No completed projects yet. Your finished collaborations will appear here."}):i.completed.map(m)})]})}function Q(){return x.jsxs("div",{className:"tab-pane-content",children:[x.jsx("h3",{className:"mb-3",children:"Tentative Projects Available (Possible Match)"}),x.jsx("p",{children:"Based on your profile, Trident recommends the following projects:"}),x.jsx("div",{className:"alert alert-info",children:"Project X: Analyzing local climate data. **Match Score: 85%**"}),x.jsx("div",{className:"alert alert-info",children:"Project Y: Survey design for mental health. **Match Score: 78%**"})]})}function K(){return x.jsxs("div",{className:"tab-pane-content",children:[x.jsx("h3",{className:"mb-3",children:"Rating and Feedback"}),x.jsx("p",{children:"Overall Rating: ★★★★☆ (4.2/5)"}),x.jsx("h4",{children:"Feedback Received"}),x.jsx("p",{className:"border-bottom pb-2",children:'"Excellent communication and timely delivery." - Nonprofit Z'})]})}function G({user:e}){const[t,a]=s.useState("projects"),[i,n]=s.useState(null),[r,l]=s.useState(0),o=e=>{n(null),l(e=>e+1),a("projects")},c=e=>{n(e),a("create")},d=()=>{n(null),a("projects")};return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content container py-5",children:[x.jsx("h1",{className:"mb-4",children:"Nonprofit Dashboard"}),x.jsxs("p",{className:"text-muted mb-4",children:["Welcome, ",e.profile?.name||e.name,"! (",e.email,")"]}),x.jsxs("ul",{className:"nav nav-tabs mb-4",children:[x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("projects"===t?"active":""),onClick:()=>{a("projects"),n(null)},children:"My Projects"})}),x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("create"===t?"active":""),onClick:()=>{a("create"),n(null)},children:i?"Edit Project":"Create New Project"})})]}),x.jsx("div",{className:"dashboard-content-area",children:(()=>{switch(t){case"projects":default:return x.jsx(U,{onEdit:c,onRefresh:r});case"create":return x.jsx(R,{projectId:i,onSuccess:o,onCancel:d})}})()})]}),x.jsx(z,{})]})}function Z({user:e}){const[t,a]=s.useState("profile");return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content container py-5",children:[x.jsx("h1",{className:"mb-4",children:"Researcher Dashboard"}),x.jsxs("ul",{className:"nav nav-tabs mb-4",children:[x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("profile"===t?"active":""),onClick:()=>a("profile"),children:"Profile Information"})}),x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("projects"===t?"active":""),onClick:()=>a("projects"),children:"Projects Involved"})}),x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("tentative"===t?"active":""),onClick:()=>a("tentative"),children:"Tentative Projects"})}),x.jsx("li",{className:"nav-item",children:x.jsx("button",{className:"nav-link "+("rating"===t?"active":""),onClick:()=>a("rating"),children:"Rating & Feedback"})})]}),x.jsx("div",{className:"dashboard-content-area",children:(()=>{switch(t){case"profile":default:return x.jsx(J,{user:e});case"projects":return x.jsx(X,{});case"tentative":return x.jsx(Q,{});case"rating":return x.jsx(K,{})}})()})]}),x.jsx(z,{})]})}function ee({user:e}){return x.jsxs("div",{children:[x.jsx("h2",{children:"Admin Panel"}),x.jsxs("p",{children:["Name: ",e.name]}),x.jsxs("p",{children:["Email: ",e.email]})]})}function te(){const{user:e}=y();let t=e;if(!t)try{const e=localStorage.getItem("trident_user");e&&(t=JSON.parse(e))}catch(s){t=null}if(!t)return x.jsx("div",{className:"alert alert-warning",children:"You must be logged in to view the dashboard."});switch(t.role){case"nonprofit":return x.jsx(G,{user:t});case"researcher":return x.jsx(Z,{user:t});case"admin":return x.jsx(ee,{user:t});default:return x.jsxs("div",{className:"alert alert-info",children:["Unknown role: ",t.role]})}}function se({user:e}){const{setUser:t}=y(),[a,i]=s.useState(e?.name||""),[n,r]=s.useState(e?.email||""),[l,o]=s.useState(!1),[c,d]=s.useState(null),[m,h]=s.useState(null);s.useEffect(()=>{e&&(i(e.name||""),r(e.email||""))},[e]);return x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4",children:"Profile Information"}),c&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),m&&x.jsx("div",{className:"alert alert-success",role:"alert",children:m}),x.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),d(null),h(null),a.trim())if(n.trim()){o(!0);try{const s=localStorage.getItem("trident_token"),i=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({name:a.trim(),email:n.trim()})}),r=await i.json();if(!i.ok)throw new Error(r.error||"Failed to update profile");h("Profile updated successfully!");const l={...e,...r.user};t(l),localStorage.setItem("trident_user",JSON.stringify(l))}catch(i){d(i.message)}finally{o(!1)}}else d("Email is required");else d("Name is required")},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"name",className:"form-label",children:"Name"}),x.jsx("input",{type:"text",className:"form-control",id:"name",value:a,onChange:e=>i(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),x.jsx("input",{type:"email",className:"form-control",id:"email",value:n,onChange:e=>r(e.target.value),required:!0}),x.jsx("div",{className:"form-text",children:"Changing your email may require verification."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{className:"form-label",children:"Role"}),x.jsx("input",{type:"text",className:"form-control",value:e?.role||"",disabled:!0}),x.jsx("div",{className:"form-text",children:"Your account role cannot be changed."})]}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Saving...":"Save Changes"})]})]})}function ae(){const[e,t]=s.useState(""),[a,i]=s.useState(""),[n,r]=s.useState(""),[l,o]=s.useState(!1),[c,d]=s.useState(null),[m,h]=s.useState(null),[u,p]=s.useState(!1);return x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4",children:"Change Password"}),c&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),m&&x.jsx("div",{className:"alert alert-success",role:"alert",children:m}),x.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),d(null),h(null),e&&a&&n)if(a.length<8)d("New password must be at least 8 characters long");else if(a===n){o(!0);try{const s=localStorage.getItem("trident_token"),n=await fetch("/api/users/me/password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({currentPassword:e,newPassword:a})}),l=await n.json();if(!n.ok)throw new Error(l.error||"Failed to change password");h("Password changed successfully!"),t(""),i(""),r("")}catch(l){d(l.message)}finally{o(!1)}}else d("New passwords do not match");else d("All fields are required")},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),x.jsx("input",{type:u?"text":"password",className:"form-control",id:"currentPassword",value:e,onChange:e=>t(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),x.jsx("input",{type:u?"text":"password",className:"form-control",id:"newPassword",value:a,onChange:e=>i(e.target.value),required:!0}),x.jsx("div",{className:"form-text",children:"Password must be at least 8 characters long."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm New Password"}),x.jsx("input",{type:u?"text":"password",className:"form-control",id:"confirmPassword",value:n,onChange:e=>r(e.target.value),required:!0})]}),x.jsxs("div",{className:"mb-3 form-check",children:[x.jsx("input",{type:"checkbox",className:"form-check-input",id:"showPasswords",checked:u,onChange:e=>p(e.target.checked)}),x.jsx("label",{className:"form-check-label",htmlFor:"showPasswords",children:"Show passwords"})]}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Changing Password...":"Change Password"})]})]})}function ie(){const[e,t]=s.useState({email_notifications:!0,email_messages:!0,email_matches:!0,email_milestones:!0,email_project_updates:!0,inapp_notifications:!0,inapp_messages:!0,inapp_matches:!0,weekly_digest:!1,monthly_report:!1,marketing_emails:!1}),[a,i]=s.useState(!0),[n,r]=s.useState(!1),[l,o]=s.useState(null),[c,d]=s.useState(null);s.useEffect(()=>{m()},[]);const m=async()=>{try{const e=localStorage.getItem("trident_token"),s=await fetch("/api/users/me/preferences",{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch preferences");t(a.preferences)}catch(e){o(e.message)}finally{i(!1)}},h=e=>{t(t=>({...t,[e]:!t[e]}))};return a?x.jsx("div",{className:"text-center py-5",children:x.jsx("div",{className:"spinner-border",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4",children:"Notification Preferences"}),l&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:l}),c&&x.jsx("div",{className:"alert alert-success",role:"alert",children:c}),x.jsxs("form",{onSubmit:async t=>{t.preventDefault(),o(null),d(null),r(!0);try{const t=localStorage.getItem("trident_token"),s=await fetch("/api/users/me/preferences",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to update preferences");d("Preferences updated successfully!"),setTimeout(()=>d(null),3e3)}catch(s){o(s.message)}finally{r(!1)}},children:[x.jsx("h5",{className:"mb-3",children:"Email Notifications"}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"form-check form-switch mb-2",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"email_notifications",checked:e.email_notifications,onChange:()=>h("email_notifications")}),x.jsx("label",{className:"form-check-label",htmlFor:"email_notifications",children:"Enable email notifications"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"email_messages",checked:e.email_messages,onChange:()=>h("email_messages"),disabled:!e.email_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"email_messages",children:"New messages"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"email_matches",checked:e.email_matches,onChange:()=>h("email_matches"),disabled:!e.email_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"email_matches",children:"New matches"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"email_milestones",checked:e.email_milestones,onChange:()=>h("email_milestones"),disabled:!e.email_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"email_milestones",children:"Milestone reminders"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"email_project_updates",checked:e.email_project_updates,onChange:()=>h("email_project_updates"),disabled:!e.email_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"email_project_updates",children:"Project updates"})]})]}),x.jsx("hr",{}),x.jsx("h5",{className:"mb-3",children:"In-App Notifications"}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"form-check form-switch mb-2",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"inapp_notifications",checked:e.inapp_notifications,onChange:()=>h("inapp_notifications")}),x.jsx("label",{className:"form-check-label",htmlFor:"inapp_notifications",children:"Enable in-app notifications"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"inapp_messages",checked:e.inapp_messages,onChange:()=>h("inapp_messages"),disabled:!e.inapp_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"inapp_messages",children:"New messages"})]}),x.jsxs("div",{className:"form-check form-switch mb-2 ms-4",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"inapp_matches",checked:e.inapp_matches,onChange:()=>h("inapp_matches"),disabled:!e.inapp_notifications}),x.jsx("label",{className:"form-check-label",htmlFor:"inapp_matches",children:"New matches"})]})]}),x.jsx("hr",{}),x.jsx("h5",{className:"mb-3",children:"Digest & Reports"}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"form-check form-switch mb-2",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"weekly_digest",checked:e.weekly_digest,onChange:()=>h("weekly_digest")}),x.jsx("label",{className:"form-check-label",htmlFor:"weekly_digest",children:"Weekly activity digest"})]}),x.jsxs("div",{className:"form-check form-switch mb-2",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"monthly_report",checked:e.monthly_report,onChange:()=>h("monthly_report")}),x.jsx("label",{className:"form-check-label",htmlFor:"monthly_report",children:"Monthly summary report"})]})]}),x.jsx("hr",{}),x.jsx("h5",{className:"mb-3",children:"Marketing"}),x.jsx("div",{className:"mb-3",children:x.jsxs("div",{className:"form-check form-switch mb-2",children:[x.jsx("input",{className:"form-check-input",type:"checkbox",id:"marketing_emails",checked:e.marketing_emails,onChange:()=>h("marketing_emails")}),x.jsx("label",{className:"form-check-label",htmlFor:"marketing_emails",children:"Receive marketing and promotional emails"})]})}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":"Save Preferences"})]})]})}function ne(){const[e,t]=s.useState({name:"",type:"",location:"",website:"",mission:"",focus_areas:[],budget_range:"",team_size:"",established_year:""}),[a,i]=s.useState(""),[n,r]=s.useState(!0),[l,o]=s.useState(!1),[c,d]=s.useState(null),[m,h]=s.useState(null);s.useEffect(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("trident_token"),s=await fetch("/api/organizations/me",{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch organization");let n=a.organization??a;n||(n={name:"",type:"",location:"",website:"",mission:"",focus_areas:[],budget_range:"",team_size:"",established_year:""}),t(n),i(Array.isArray(n.focus_areas)?n.focus_areas.join(", "):"")}catch(e){d(e.message)}finally{r(!1)}};return n?x.jsx("div",{className:"text-center py-5",children:x.jsx("div",{className:"spinner-border",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4",children:"Organization Settings"}),c&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),m&&x.jsx("div",{className:"alert alert-success",role:"alert",children:m}),x.jsxs("form",{onSubmit:async s=>{s.preventDefault(),d(null),h(null),o(!0);try{const s=localStorage.getItem("trident_token"),i={...e,focus_areas:a.split(",").map(e=>e.trim()).filter(Boolean)},n=await fetch("/api/organizations/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(i)});let r=null;try{r=await n.json()}catch{r=null}if(!n.ok){throw new Error(r?.error||"Failed to update organization")}r?.organization&&t(r.organization),h("Organization updated successfully!"),setTimeout(()=>h(null),3e3)}catch(i){d(i.message)}finally{o(!1)}},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"name",className:"form-label",children:"Organization Name"}),x.jsx("input",{type:"text",className:"form-control",id:"name",value:e.name,onChange:s=>t({...e,name:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"type",className:"form-label",children:"Organization Type"}),x.jsx("input",{type:"text",className:"form-control",id:"type",value:e.type,onChange:s=>t({...e,type:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"location",className:"form-label",children:"Location"}),x.jsx("input",{type:"text",className:"form-control",id:"location",value:e.location,onChange:s=>t({...e,location:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"website",className:"form-label",children:"Website"}),x.jsx("input",{type:"url",className:"form-control",id:"website",value:e.website,onChange:s=>t({...e,website:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"mission",className:"form-label",children:"Mission Statement"}),x.jsx("textarea",{className:"form-control",id:"mission",rows:"3",value:e.mission,onChange:s=>t({...e,mission:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"focus_areas",className:"form-label",children:"Focus Areas"}),x.jsx("input",{type:"text",className:"form-control",id:"focus_areas",value:a,onChange:e=>i(e.target.value),placeholder:"e.g., Education, Health, Environment (comma-separated)"}),x.jsx("div",{className:"form-text",children:"Enter focus areas separated by commas."})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"budget_range",className:"form-label",children:"Budget Range"}),x.jsx("input",{type:"text",className:"form-control",id:"budget_range",value:e.budget_range,onChange:s=>t({...e,budget_range:s.target.value}),placeholder:"e.g., $100,000 - $500,000"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"team_size",className:"form-label",children:"Team Size"}),x.jsx("input",{type:"number",className:"form-control",id:"team_size",value:e.team_size,onChange:s=>t({...e,team_size:s.target.value})})]})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"established_year",className:"form-label",children:"Established Year"}),x.jsx("input",{type:"number",className:"form-control",id:"established_year",value:e.established_year,onChange:s=>t({...e,established_year:s.target.value}),min:"1800",max:(new Date).getFullYear()})]}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Saving...":"Save Changes"})]})]})}function re(){const[e,t]=s.useState({title:"",institution:"",expertise:[],research_interests:[],bio:"",projects_completed:0,hourly_rate_min:"",hourly_rate_max:"",available_hours:"",preferred_project_types:[]}),[a,i]=s.useState(""),[n,r]=s.useState(""),[l,o]=s.useState(""),[c,d]=s.useState(!0),[m,h]=s.useState(!1),[u,p]=s.useState(null),[f,b]=s.useState(null);s.useEffect(()=>{g()},[]);const g=async()=>{try{const e=localStorage.getItem("trident_token"),s=await fetch("/api/researchers/me",{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch researcher profile");t(a.profile),i(Array.isArray(a.profile.expertise)?a.profile.expertise.join(", "):""),r(Array.isArray(a.profile.research_interests)?a.profile.research_interests.join(", "):""),o(Array.isArray(a.profile.preferred_project_types)?a.profile.preferred_project_types.join(", "):"")}catch(e){p(e.message)}finally{d(!1)}};return c?x.jsx("div",{className:"text-center py-5",children:x.jsx("div",{className:"spinner-border",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4",children:"Researcher Profile Settings"}),u&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:u}),f&&x.jsx("div",{className:"alert alert-success",role:"alert",children:f}),x.jsxs("form",{onSubmit:async s=>{s.preventDefault(),p(null),b(null);const i=parseFloat(e.hourly_rate_min),r=parseFloat(e.hourly_rate_max);if(i&&r&&i>r)p("Minimum rate cannot exceed maximum rate");else{h(!0);try{const s=localStorage.getItem("trident_token"),i={...e,expertise:a.split(",").map(e=>e.trim()).filter(Boolean),research_interests:n.split(",").map(e=>e.trim()).filter(Boolean),preferred_project_types:l.split(",").map(e=>e.trim()).filter(Boolean),hourly_rate_min:e.hourly_rate_min?parseFloat(e.hourly_rate_min):void 0,hourly_rate_max:e.hourly_rate_max?parseFloat(e.hourly_rate_max):void 0,available_hours:e.available_hours?parseFloat(e.available_hours):void 0},r=await fetch("/api/researchers/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(i)}),o=await r.json();if(!r.ok)throw new Error(o.error||"Failed to update researcher profile");b("Researcher profile updated successfully!"),t(o.profile),setTimeout(()=>b(null),3e3)}catch(o){p(o.message)}finally{h(!1)}}},children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"title",className:"form-label",children:"Professional Title"}),x.jsx("input",{type:"text",className:"form-control",id:"title",value:e.title,onChange:s=>t({...e,title:s.target.value}),placeholder:"e.g., PhD Candidate, Professor, Research Scientist"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"institution",className:"form-label",children:"Institution/Affiliation"}),x.jsx("input",{type:"text",className:"form-control",id:"institution",value:e.institution,onChange:s=>t({...e,institution:s.target.value})})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"expertise",className:"form-label",children:"Areas of Expertise"}),x.jsx("input",{type:"text",className:"form-control",id:"expertise",value:a,onChange:e=>i(e.target.value),placeholder:"e.g., Machine Learning, Statistics, Data Science (comma-separated)"}),x.jsx("div",{className:"form-text",children:"Enter your areas of expertise separated by commas."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"research_interests",className:"form-label",children:"Research Interests"}),x.jsx("input",{type:"text",className:"form-control",id:"research_interests",value:n,onChange:e=>r(e.target.value),placeholder:"e.g., AI Ethics, Public Health, Climate Change (comma-separated)"}),x.jsx("div",{className:"form-text",children:"Enter your research interests separated by commas."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"bio",className:"form-label",children:"Professional Bio"}),x.jsx("textarea",{className:"form-control",id:"bio",rows:"4",value:e.bio,onChange:s=>t({...e,bio:s.target.value}),placeholder:"Tell organizations about your background and experience..."})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"preferred_project_types",className:"form-label",children:"Preferred Project Types"}),x.jsx("input",{type:"text",className:"form-control",id:"preferred_project_types",value:l,onChange:e=>o(e.target.value),placeholder:"e.g., Research, Consulting, Analysis (comma-separated)"})]}),x.jsxs("div",{className:"row",children:[x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"hourly_rate_min",className:"form-label",children:"Minimum Hourly Rate ($)"}),x.jsx("input",{type:"number",className:"form-control",id:"hourly_rate_min",value:e.hourly_rate_min,onChange:s=>t({...e,hourly_rate_min:s.target.value}),min:"0",step:"0.01"})]}),x.jsxs("div",{className:"col-md-6 mb-3",children:[x.jsx("label",{htmlFor:"hourly_rate_max",className:"form-label",children:"Maximum Hourly Rate ($)"}),x.jsx("input",{type:"number",className:"form-control",id:"hourly_rate_max",value:e.hourly_rate_max,onChange:s=>t({...e,hourly_rate_max:s.target.value}),min:"0",step:"0.01"})]})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"available_hours",className:"form-label",children:"Available Hours per Week"}),x.jsx("input",{type:"number",className:"form-control",id:"available_hours",value:e.available_hours,onChange:s=>t({...e,available_hours:s.target.value}),min:"0",step:"0.5"})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("label",{htmlFor:"projects_completed",className:"form-label",children:"Projects Completed"}),x.jsx("input",{type:"number",className:"form-control",id:"projects_completed",value:e.projects_completed,onChange:s=>t({...e,projects_completed:s.target.value}),min:"0"})]}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":"Save Changes"})]})]})}function le(){const{logout:e}=y(),t=a(),[i,n]=s.useState(!1),[r,l]=s.useState(""),[o,c]=s.useState(!1),[d,m]=s.useState(null);return x.jsxs("div",{children:[x.jsx("h3",{className:"mb-4 text-danger",children:"Danger Zone"}),x.jsxs("div",{className:"alert alert-danger",children:[x.jsx("h5",{children:"Delete Account"}),x.jsx("p",{className:"mb-0",children:"Once you delete your account, all your data will be marked for deletion. You can contact support within 30 days to restore your account. After 30 days, your data will be permanently deleted."})]}),i?x.jsx("div",{className:"card border-danger",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h5",{className:"card-title text-danger",children:"Are you absolutely sure?"}),x.jsx("p",{className:"card-text",children:"This action will soft-delete your account. Your data can be recovered within 30 days by contacting support. After that, it will be permanently deleted."}),d&&x.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("label",{htmlFor:"confirmText",className:"form-label",children:["Type ",x.jsx("strong",{children:"DELETE"})," to confirm:"]}),x.jsx("input",{type:"text",className:"form-control",id:"confirmText",value:r,onChange:e=>l(e.target.value),placeholder:"DELETE"})]}),x.jsxs("div",{className:"d-flex gap-2",children:[x.jsx("button",{className:"btn btn-danger",onClick:async()=>{if("DELETE"===r){c(!0),m(null);try{const s=localStorage.getItem("trident_token"),a=await fetch("/api/users/me",{method:"DELETE",headers:{Authorization:`Bearer ${s}`}}),i=await a.json();if(!a.ok)throw new Error(i.error||"Failed to delete account");alert(i.message||"Account deleted successfully. You can contact support to restore it within 30 days."),e(),t("/")}catch(s){m(s.message)}finally{c(!1)}}else m('Please type "DELETE" to confirm account deletion')},disabled:o||"DELETE"!==r,children:o?"Deleting...":"I understand, delete my account"}),x.jsx("button",{className:"btn btn-secondary",onClick:()=>{n(!1),l(""),m(null)},disabled:o,children:"Cancel"})]})]})}):x.jsx("button",{className:"btn btn-danger",onClick:()=>n(!0),children:"Delete My Account"})]})}function oe(){const{user:e}=y(),[t,a]=s.useState("profile");let i=e;if(!i)try{const e=localStorage.getItem("trident_user");e&&(i=JSON.parse(e))}catch(n){i=null}if(!i)return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsx("main",{className:"page-content container py-5",children:x.jsx("div",{className:"alert alert-warning",children:"You must be logged in to view settings."})}),x.jsx(z,{})]});return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content container py-5",children:[x.jsx("h1",{className:"mb-4",children:"Account Settings"}),x.jsxs("div",{className:"row",children:[x.jsx("div",{className:"col-md-3",children:x.jsxs("div",{className:"list-group",children:[x.jsx("button",{className:"list-group-item list-group-item-action "+("profile"===t?"active":""),onClick:()=>a("profile"),children:"Profile"}),x.jsx("button",{className:"list-group-item list-group-item-action "+("password"===t?"active":""),onClick:()=>a("password"),children:"Password"}),x.jsx("button",{className:"list-group-item list-group-item-action "+("preferences"===t?"active":""),onClick:()=>a("preferences"),children:"Notifications"}),"nonprofit"===i.role&&x.jsx("button",{className:"list-group-item list-group-item-action "+("organization"===t?"active":""),onClick:()=>a("organization"),children:"Organization"}),"researcher"===i.role&&x.jsx("button",{className:"list-group-item list-group-item-action "+("researcher"===t?"active":""),onClick:()=>a("researcher"),children:"Researcher Profile"}),x.jsx("button",{className:"list-group-item list-group-item-action text-danger "+("danger"===t?"active":""),onClick:()=>a("danger"),children:"Delete Account"})]})}),x.jsx("div",{className:"col-md-9",children:x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body",children:(()=>{switch(t){case"profile":default:return x.jsx(se,{user:i});case"password":return x.jsx(ae,{});case"preferences":return x.jsx(ie,{});case"organization":return"nonprofit"===i.role?x.jsx(ne,{}):null;case"researcher":return"researcher"===i.role?x.jsx(re,{}):null;case"danger":return x.jsx(le,{})}})()})})})]})]}),x.jsx(z,{})]})}function ce({onSearch:e,onFilterChange:t,filters:a}){const[i,n]=s.useState(!1),[r,l]=s.useState(a.search||""),o=(e,s)=>{t({...a,[e]:s})},c=()=>a.methods||a.budget_min||a.budget_max||a.data_sensitivity||a.timeline;return x.jsxs("div",{className:"mb-4",children:[x.jsx("form",{onSubmit:t=>{t.preventDefault(),e(r)},className:"mb-3",children:x.jsxs("div",{className:"input-group input-group-lg",children:[x.jsx("input",{type:"text",className:"form-control",placeholder:"Search projects by keywords...",value:r,onChange:e=>l(e.target.value),"aria-label":"Search projects"}),x.jsxs("button",{className:"btn btn-primary",type:"submit",children:[x.jsx("i",{className:"bi bi-search me-2"}),"Search"]}),x.jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>n(!i),children:[x.jsx("i",{className:`bi bi-funnel${i?"-fill":""} me-2`}),"Filters ",c()&&x.jsx("span",{className:"badge bg-primary ms-1",children:"Active"})]})]})}),i&&x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{htmlFor:"methodsFilter",className:"form-label",children:"Research Methods"}),x.jsx("input",{type:"text",className:"form-control",id:"methodsFilter",placeholder:"e.g., statistical analysis, survey",value:a.methods||"",onChange:e=>o("methods",e.target.value)}),x.jsx("div",{className:"form-text",children:"Search for specific methods or expertise"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{htmlFor:"sensitivityFilter",className:"form-label",children:"Data Sensitivity"}),x.jsxs("select",{className:"form-select",id:"sensitivityFilter",value:a.data_sensitivity||"",onChange:e=>o("data_sensitivity",e.target.value),children:[x.jsx("option",{value:"",children:"All Levels"}),x.jsx("option",{value:"Low",children:"Low"}),x.jsx("option",{value:"Medium",children:"Medium"}),x.jsx("option",{value:"High",children:"High"})]}),x.jsx("div",{className:"form-text",children:"Filter by data sensitivity level"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{htmlFor:"budgetMinFilter",className:"form-label",children:"Minimum Budget (USD)"}),x.jsx("input",{type:"number",className:"form-control",id:"budgetMinFilter",placeholder:"e.g., 5000",min:"0",value:a.budget_min||"",onChange:e=>o("budget_min",e.target.value)})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{htmlFor:"budgetMaxFilter",className:"form-label",children:"Maximum Budget (USD)"}),x.jsx("input",{type:"number",className:"form-control",id:"budgetMaxFilter",placeholder:"e.g., 50000",min:"0",value:a.budget_max||"",onChange:e=>o("budget_max",e.target.value)})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{htmlFor:"timelineFilter",className:"form-label",children:"Timeline"}),x.jsx("input",{type:"text",className:"form-control",id:"timelineFilter",placeholder:"e.g., 6 months, Q1 2025",value:a.timeline||"",onChange:e=>o("timeline",e.target.value)}),x.jsx("div",{className:"form-text",children:"Search for specific timeline"})]}),x.jsx("div",{className:"col-12",children:x.jsxs("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{l(""),t({search:"",methods:"",budget_min:"",budget_max:"",data_sensitivity:"",timeline:""})},disabled:!r&&!c(),children:[x.jsx("i",{className:"bi bi-x-circle me-2"}),"Clear All Filters"]})})]})})})]})}function de({project:e,onViewDetails:t}){return x.jsxs("div",{className:"card h-100 shadow-sm hover-shadow",children:[x.jsxs("div",{className:"card-body",children:[x.jsx("h5",{className:"card-title mb-2",children:e.title}),x.jsxs("p",{className:"text-muted small mb-3",children:[x.jsx("i",{className:"bi bi-building me-1"}),e.organization?.name,e.organization?.location&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"mx-2",children:"•"}),x.jsx("i",{className:"bi bi-geo-alt me-1"}),e.organization.location]})]}),e.problem&&x.jsxs("p",{className:"card-text mb-3",children:[x.jsx("strong",{children:"Problem:"})," ",e.problem.length>120?`${e.problem.substring(0,120)}...`:e.problem]}),e.methods_required&&x.jsxs("p",{className:"card-text small mb-2",children:[x.jsx("strong",{children:"Methods:"})," ",e.methods_required.length>100?`${e.methods_required.substring(0,100)}...`:e.methods_required]}),x.jsxs("div",{className:"row small text-muted mt-3",children:[e.timeline&&x.jsxs("div",{className:"col-6 mb-2",children:[x.jsx("i",{className:"bi bi-clock me-1"}),e.timeline]}),e.budget_min&&x.jsxs("div",{className:"col-6 mb-2",children:[x.jsx("i",{className:"bi bi-currency-dollar me-1"}),(a=e.budget_min,a?`$${parseFloat(a).toLocaleString()}`:"Not specified")]}),e.data_sensitivity&&x.jsxs("div",{className:"col-12 mb-2",children:[x.jsx("i",{className:"bi bi-shield-check me-1"}),"Data Sensitivity:"," ",x.jsx("span",{className:`badge bg-${s=e.data_sensitivity,{Low:"success",Medium:"warning",High:"danger"}[s]||"secondary"} ms-1`,children:e.data_sensitivity})]})]}),e.organization?.focus_areas&&e.organization.focus_areas.length>0&&x.jsx("div",{className:"mt-3",children:e.organization.focus_areas.slice(0,3).map((e,t)=>x.jsx("span",{className:"badge bg-light text-dark me-1 mb-1",children:e},t))})]}),x.jsx("div",{className:"card-footer bg-transparent",children:x.jsxs("button",{className:"btn btn-primary btn-sm w-100",onClick:()=>t(e.project_id),children:[x.jsx("i",{className:"bi bi-eye me-2"}),"View Full Details"]})})]});var s,a}function me({projectId:e,onClose:t}){const[a,i]=s.useState(null),[n,r]=s.useState(!0),[l,o]=s.useState(null);s.useEffect(()=>{e&&c()},[e]);const c=async()=>{r(!0),o(null);try{const t=await fetch(`/api/projects/browse/${e}`),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to fetch project details");i(s.project)}catch(t){o(t.message)}finally{r(!1)}};return e?x.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:t,children:x.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",onClick:e=>e.stopPropagation(),children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h5",{className:"modal-title",children:"Project Details"}),x.jsx("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),x.jsxs("div",{className:"modal-body",children:[n&&x.jsx("div",{className:"d-flex justify-content-center p-4",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),l&&x.jsxs("div",{className:"alert alert-danger",role:"alert",children:[x.jsx("strong",{children:"Error:"})," ",l]}),a&&!n&&x.jsxs("div",{children:[x.jsx("h4",{className:"mb-3",children:a.title}),x.jsx("div",{className:"card bg-light mb-3",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("h6",{className:"card-title",children:[x.jsx("i",{className:"bi bi-building me-2"}),a.organization?.name]}),a.organization?.mission&&x.jsxs("p",{className:"card-text small mb-2",children:[x.jsx("strong",{children:"Mission:"})," ",a.organization.mission]}),x.jsxs("div",{className:"row small",children:[a.organization?.location&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("i",{className:"bi bi-geo-alt me-1"}),a.organization.location]}),a.organization?.website&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("i",{className:"bi bi-globe me-1"}),x.jsx("a",{href:a.organization.website,target:"_blank",rel:"noopener noreferrer",children:"Website"})]})]}),a.organization?.focus_areas&&a.organization.focus_areas.length>0&&x.jsxs("div",{className:"mt-2",children:[x.jsx("strong",{className:"small",children:"Focus Areas:"}),x.jsx("div",{className:"mt-1",children:a.organization.focus_areas.map((e,t)=>x.jsx("span",{className:"badge bg-primary me-1 mb-1",children:e},t))})]})]})}),a.problem&&x.jsxs("div",{className:"mb-3",children:[x.jsxs("h6",{children:[x.jsx("i",{className:"bi bi-exclamation-circle me-2"}),"Problem Statement"]}),x.jsx("p",{children:a.problem})]}),a.outcomes&&x.jsxs("div",{className:"mb-3",children:[x.jsxs("h6",{children:[x.jsx("i",{className:"bi bi-bullseye me-2"}),"Expected Outcomes"]}),x.jsx("p",{children:a.outcomes})]}),a.methods_required&&x.jsxs("div",{className:"mb-3",children:[x.jsxs("h6",{children:[x.jsx("i",{className:"bi bi-tools me-2"}),"Methods & Expertise Required"]}),x.jsx("p",{children:a.methods_required})]}),x.jsxs("div",{className:"row g-3",children:[a.timeline&&x.jsx("div",{className:"col-md-6",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("h6",{className:"card-title",children:[x.jsx("i",{className:"bi bi-clock me-2"}),"Timeline"]}),x.jsx("p",{className:"card-text",children:a.timeline})]})})}),a.budget_min&&x.jsx("div",{className:"col-md-6",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("h6",{className:"card-title",children:[x.jsx("i",{className:"bi bi-currency-dollar me-2"}),"Budget"]}),x.jsx("p",{className:"card-text",children:(m=a.budget_min,m?`$${parseFloat(m).toLocaleString()}`:"Not specified")})]})})}),a.data_sensitivity&&x.jsx("div",{className:"col-md-12",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("h6",{className:"card-title",children:[x.jsx("i",{className:"bi bi-shield-check me-2"}),"Data Sensitivity"]}),x.jsx("span",{className:`badge bg-${d=a.data_sensitivity,{Low:"success",Medium:"warning",High:"danger"}[d]||"secondary"}`,children:a.data_sensitivity})]})})})]})]})]}),x.jsxs("div",{className:"modal-footer",children:[x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),a&&x.jsxs("button",{type:"button",className:"btn btn-primary",children:[x.jsx("i",{className:"bi bi-envelope me-2"}),"Express Interest"]})]})]})})}):null;var d,m}function he(){const[e,t]=s.useState([]),[a,i]=s.useState(!0),[n,l]=s.useState(null),[o,c]=s.useState(null),[d,m]=s.useState({total:0,page:1,limit:20,totalPages:0}),[h,u]=s.useState({search:"",methods:"",budget_min:"",budget_max:"",data_sensitivity:"",timeline:""});s.useEffect(()=>{p()},[h,d.page]);const p=async()=>{i(!0),l(null);try{const e=new URLSearchParams({page:d.page,limit:d.limit});h.search&&e.append("search",h.search),h.methods&&e.append("methods",h.methods),h.budget_min&&e.append("budget_min",h.budget_min),h.budget_max&&e.append("budget_max",h.budget_max),h.data_sensitivity&&e.append("data_sensitivity",h.data_sensitivity),h.timeline&&e.append("timeline",h.timeline);const s=await fetch(`/api/projects/browse?${e.toString()}`),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to fetch projects");t(a.projects),m(a.pagination)}catch(e){l(e.message)}finally{i(!1)}},f=e=>{m(t=>({...t,page:e})),window.scrollTo({top:0,behavior:"smooth"})},b=e=>{c(e)};return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content container py-5",children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("h1",{className:"mb-2",children:"Browse Project Opportunities"}),x.jsx("p",{className:"text-muted",children:"Discover research collaboration opportunities from nonprofit organizations"})]}),x.jsx(ce,{onSearch:e=>{u(t=>({...t,search:e})),m(e=>({...e,page:1}))},onFilterChange:e=>{u(e),m(e=>({...e,page:1}))},filters:h}),a&&x.jsx("div",{className:"d-flex justify-content-center p-5",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),n&&x.jsxs("div",{className:"alert alert-danger",role:"alert",children:[x.jsx("strong",{children:"Error:"})," ",n,x.jsx("button",{className:"btn btn-sm btn-outline-danger ms-3",onClick:p,children:"Retry"})]}),!a&&!n&&x.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[x.jsxs("p",{className:"text-muted mb-0",children:[d.total," ",1===d.total?"project":"projects"," found",h.search&&x.jsxs("span",{children:[' for "',x.jsx("strong",{children:h.search}),'"']})]}),x.jsxs("div",{className:"text-muted small",children:["Page ",d.page," of ",d.totalPages||1]})]}),!a&&!n&&x.jsxs(x.Fragment,{children:[0===e.length?x.jsxs("div",{className:"alert alert-info text-center p-5",children:[x.jsx("i",{className:"bi bi-search display-4 d-block mb-3"}),x.jsx("h5",{children:"No projects found"}),x.jsx("p",{className:"mb-0",children:"Try adjusting your search criteria or clearing filters"})]}):x.jsx("div",{className:"row",children:e.map(e=>x.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:x.jsx(de,{project:e,onViewDetails:b})},e.project_id))}),d.totalPages>1&&x.jsx("nav",{"aria-label":"Page navigation",children:x.jsxs("ul",{className:"pagination justify-content-center",children:[x.jsx("li",{className:"page-item "+(1===d.page?"disabled":""),children:x.jsx("button",{className:"page-link",onClick:()=>f(d.page-1),disabled:1===d.page,children:"Previous"})}),Array.from({length:d.totalPages},(e,t)=>t+1).filter(e=>1===e||e===d.totalPages||Math.abs(e-d.page)<=1).map((e,t,s)=>{const a=s[t-1],i=a&&e-a>1;return x.jsxs(r.Fragment,{children:[i&&x.jsx("li",{className:"page-item disabled",children:x.jsx("span",{className:"page-link",children:"..."})}),x.jsx("li",{className:"page-item "+(d.page===e?"active":""),children:x.jsx("button",{className:"page-link",onClick:()=>f(e),children:e})})]},e)}),x.jsx("li",{className:"page-item "+(d.page===d.totalPages?"disabled":""),children:x.jsx("button",{className:"page-link",onClick:()=>f(d.page+1),disabled:d.page===d.totalPages,children:"Next"})})]})})]})]}),x.jsx(z,{}),o&&x.jsx(me,{projectId:o,onClose:()=>{c(null)}})]})}function ue(){const{token:e,user:t}=y(),[a,i]=s.useState("overview"),[n,r]=s.useState(null),[l,o]=s.useState([]),[c,d]=s.useState([]),[m,h]=s.useState([]),[u,p]=s.useState([]),[f,b]=s.useState([]),[g,j]=s.useState(!0),[v,N]=s.useState(null),[_,w]=s.useState(null),[k,C]=s.useState(null),[A,E]=s.useState(null),[T,P]=s.useState(null),[O,D]=s.useState(!1),[$,L]=s.useState({role:"",status:"",search:""}),[F,I]=s.useState({status:"",search:""}),[M,R]=s.useState(1),[B,q]=s.useState(1);s.useEffect(()=>e?t&&"admin"!==t.role?(N("Access denied. Admin privileges required."),void j(!1)):void 0:(N("Not authenticated. Please log in as admin."),void j(!1)),[e,t]),s.useEffect(()=>{H()},[]),s.useEffect(()=>{"users"===a&&U(),"projects"===a&&W(),"pending-review"===a&&J(),"milestones"===a&&V(),"organizations"===a&&Y()},[a,$,F,M,B]);const H=async()=>{try{if(!e)return void N("Not authenticated. Please log in as admin.");const t=await fetch("/api/admin/dashboard/stats",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok?r(s.stats):401===t.status?N("Unauthorized. Please log in as admin."):403===t.status?N("Forbidden. Admin access required."):N(s.error||"Failed to fetch stats")}catch(t){console.error("Dashboard stats error:",t),N("Failed to fetch dashboard stats")}},U=async()=>{j(!0);try{const t=new URLSearchParams({page:M,limit:20,...$,includeSuspended:"true"}),s=await fetch(`/api/admin/users?${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?o(a.users):N(a.error)}catch(t){N("Failed to fetch users")}finally{j(!1)}},W=async()=>{j(!0);try{const t=new URLSearchParams({page:B,limit:20,...F}),s=await fetch(`/api/admin/projects?${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?d(a.projects):N(a.error)}catch(t){N("Failed to fetch projects")}finally{j(!1)}},V=async()=>{j(!0);try{const t=await fetch("/api/admin/milestones?limit=50",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok?p(s.milestones):N(s.error)}catch(t){N("Failed to fetch milestones")}finally{j(!1)}},Y=async()=>{j(!0);try{const t=await fetch("/api/admin/organizations?limit=50",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok?b(s.organizations):N(s.error)}catch(t){N("Failed to fetch organizations")}finally{j(!1)}},J=async()=>{j(!0);try{const t=await fetch("/api/admin/projects/pending?limit=50",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();t.ok?h(s.projects):N(s.error)}catch(t){N("Failed to fetch pending projects")}finally{j(!1)}},X=t=>{E(t),(async t=>{D(!0);try{const s=await fetch(`/api/admin/projects/${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?P(a.project):N(a.error)}catch(s){N("Failed to fetch project details")}finally{D(!1)}})(t.project_id)};return x.jsxs("div",{className:"page-root",children:[x.jsx(S,{}),x.jsxs("main",{className:"page-content container-fluid py-4",children:[x.jsxs("h1",{className:"mb-4",children:[x.jsx("i",{className:"bi bi-shield-check me-2"}),"Admin Dashboard"]}),v&&x.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[v,x.jsx("button",{type:"button",className:"btn-close",onClick:()=>N(null)})]}),x.jsxs("ul",{className:"nav nav-tabs mb-4",children:[x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("overview"===a?"active":""),onClick:()=>i("overview"),children:[x.jsx("i",{className:"bi bi-bar-chart me-1"})," Overview"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("users"===a?"active":""),onClick:()=>i("users"),children:[x.jsx("i",{className:"bi bi-people me-1"})," Users",n?.pending_approval>0&&x.jsx("span",{className:"badge bg-danger ms-2",children:n.pending_approval})]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("projects"===a?"active":""),onClick:()=>i("projects"),children:[x.jsx("i",{className:"bi bi-folder me-1"})," Projects"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("pending-review"===a?"active":""),onClick:()=>i("pending-review"),children:[x.jsx("i",{className:"bi bi-clipboard-check me-1"})," Pending Review"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("milestones"===a?"active":""),onClick:()=>i("milestones"),children:[x.jsx("i",{className:"bi bi-flag me-1"})," Milestones"]})}),x.jsx("li",{className:"nav-item",children:x.jsxs("button",{className:"nav-link "+("organizations"===a?"active":""),onClick:()=>i("organizations"),children:[x.jsx("i",{className:"bi bi-building me-1"})," Organizations"]})})]}),"overview"===a&&x.jsxs("div",{className:"row g-4",children:[x.jsx("div",{className:"col-12",children:x.jsx("h5",{className:"mb-3",children:"Platform Statistics"})}),x.jsx("div",{className:"col-md-3",children:x.jsxs("div",{className:"card bg-primary text-white h-100",children:[x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsx("h6",{className:"card-title",children:"Total Users"}),x.jsx("h2",{className:"mb-2",children:n?.total_users||0}),x.jsxs("small",{children:[n?.nonprofit_users||0," nonprofits",x.jsx("br",{}),n?.researcher_users||0," researchers"]})]}),x.jsx("i",{className:"bi bi-people fs-1 opacity-50"})]})}),x.jsx("div",{className:"card-footer bg-transparent border-0",children:x.jsx("button",{className:"btn btn-light btn-sm w-100",onClick:()=>i("users"),children:"View All Users"})})]})}),x.jsx("div",{className:"col-md-3",children:x.jsxs("div",{className:"card bg-success text-white h-100",children:[x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsx("h6",{className:"card-title",children:"Organizations"}),x.jsx("h2",{className:"mb-2",children:n?.total_organizations||0}),x.jsx("small",{children:"Registered nonprofits"})]}),x.jsx("i",{className:"bi bi-building fs-1 opacity-50"})]})}),x.jsx("div",{className:"card-footer bg-transparent border-0",children:x.jsx("button",{className:"btn btn-light btn-sm w-100",onClick:()=>i("organizations"),children:"View Organizations"})})]})}),x.jsx("div",{className:"col-md-3",children:x.jsxs("div",{className:"card bg-info text-white h-100",children:[x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsx("h6",{className:"card-title",children:"Projects"}),x.jsx("h2",{className:"mb-2",children:n?.total_projects||0}),x.jsxs("small",{children:[n?.open_projects||0," open",x.jsx("br",{}),n?.draft_projects||0," drafts"]})]}),x.jsx("i",{className:"bi bi-folder fs-1 opacity-50"})]})}),x.jsx("div",{className:"card-footer bg-transparent border-0",children:x.jsx("button",{className:"btn btn-light btn-sm w-100",onClick:()=>i("projects"),children:"View All Projects"})})]})}),x.jsx("div",{className:"col-md-3",children:x.jsxs("div",{className:"card bg-secondary text-white h-100",children:[x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsxs("div",{children:[x.jsx("h6",{className:"card-title",children:"Milestones"}),x.jsx("h2",{className:"mb-2",children:n?.total_milestones||0}),x.jsxs("small",{children:[n?.active_milestones||0," in progress",x.jsx("br",{}),n?.completed_milestones||0," completed"]})]}),x.jsx("i",{className:"bi bi-flag fs-1 opacity-50"})]})}),x.jsx("div",{className:"card-footer bg-transparent border-0",children:x.jsx("button",{className:"btn btn-light btn-sm w-100",onClick:()=>i("milestones"),children:"View Milestones"})})]})}),x.jsx("div",{className:"col-12 mt-4",children:x.jsx("h5",{className:"mb-3",children:"Action Items"})}),x.jsx("div",{className:"col-md-6",children:x.jsxs("div",{className:"card border-warning",children:[x.jsx("div",{className:"card-header bg-warning text-dark",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Pending Approvals"]})}),x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[x.jsx("span",{className:"fs-5",children:"New User Accounts"}),x.jsx("span",{className:"badge bg-warning fs-6",children:n?.pending_approval||0})]}),x.jsx("button",{className:"btn btn-warning w-100",onClick:()=>i("users"),disabled:!n?.pending_approval,children:"Review Pending Users"})]})]})}),x.jsx("div",{className:"col-md-6",children:x.jsxs("div",{className:"card border-danger",children:[x.jsx("div",{className:"card-header bg-danger text-white",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-ban me-2"}),"Suspended Accounts"]})}),x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[x.jsx("span",{className:"fs-5",children:"Suspended Users"}),x.jsx("span",{className:"badge bg-danger fs-6",children:n?.suspended_users||0})]}),x.jsx("button",{className:"btn btn-danger w-100",onClick:()=>i("users"),disabled:!n?.suspended_users,children:"View Suspended Users"})]})]})}),x.jsx("div",{className:"col-12 mt-4",children:x.jsx("h5",{className:"mb-3",children:"Quick Summary"})}),x.jsx("div",{className:"col-md-12",children:x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"card-header",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-graph-up me-2"}),"Platform Overview"]})}),x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsx("div",{className:"col-md-4",children:x.jsxs("div",{className:"border-start border-primary border-4 ps-3",children:[x.jsx("div",{className:"text-muted small",children:"Total Users"}),x.jsx("div",{className:"h4 mb-0",children:n?.total_users||0}),x.jsxs("div",{className:"small text-success",children:[x.jsx("i",{className:"bi bi-check-circle me-1"}),n?.total_users-(n?.pending_approval||0)-(n?.suspended_users||0)||0," active"]})]})}),x.jsx("div",{className:"col-md-4",children:x.jsxs("div",{className:"border-start border-success border-4 ps-3",children:[x.jsx("div",{className:"text-muted small",children:"Organizations"}),x.jsx("div",{className:"h4 mb-0",children:n?.total_organizations||0}),x.jsx("div",{className:"small",children:"Nonprofits registered"})]})}),x.jsx("div",{className:"col-md-4",children:x.jsxs("div",{className:"border-start border-info border-4 ps-3",children:[x.jsx("div",{className:"text-muted small",children:"Projects"}),x.jsx("div",{className:"h4 mb-0",children:n?.total_projects||0}),x.jsxs("div",{className:"small",children:[x.jsxs("span",{className:"text-success me-2",children:[n?.open_projects||0," open"]}),x.jsxs("span",{className:"text-muted",children:[n?.draft_projects||0," drafts"]})]})]})})]})})]})}),x.jsx("div",{className:"col-12 mt-4",children:x.jsx("div",{className:"card bg-light",children:x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row align-items-center",children:[x.jsxs("div",{className:"col-md-8",children:[x.jsxs("h6",{className:"mb-2",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),"System Status"]}),x.jsxs("p",{className:"mb-0 small text-muted",children:["All systems operational. Database connected. Last update: ",(new Date).toLocaleString()]})]}),x.jsx("div",{className:"col-md-4 text-end",children:x.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>H(),children:[x.jsx("i",{className:"bi bi-arrow-clockwise me-1"}),"Refresh Stats"]})})]})})})})]}),"users"===a&&x.jsxs("div",{children:[x.jsx("div",{className:"card mb-3",children:x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsx("div",{className:"col-md-3",children:x.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name or email...",value:$.search,onChange:e=>L({...$,search:e.target.value})})}),x.jsx("div",{className:"col-md-2",children:x.jsxs("select",{className:"form-select",value:$.role,onChange:e=>L({...$,role:e.target.value}),children:[x.jsx("option",{value:"",children:"All Roles"}),x.jsx("option",{value:"nonprofit",children:"Nonprofit"}),x.jsx("option",{value:"researcher",children:"Researcher"}),x.jsx("option",{value:"admin",children:"Admin"})]})}),x.jsx("div",{className:"col-md-2",children:x.jsxs("select",{className:"form-select",value:$.status,onChange:e=>L({...$,status:e.target.value}),children:[x.jsx("option",{value:"",children:"All Statuses"}),x.jsx("option",{value:"active",children:"Active"}),x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"suspended",children:"Suspended"})]})})]})})}),x.jsx("div",{className:"card",children:x.jsx("div",{className:"table-responsive",children:x.jsxs("table",{className:"table table-hover mb-0",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Name"}),x.jsx("th",{children:"Email"}),x.jsx("th",{children:"Role"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Affiliation"}),x.jsx("th",{children:"Created"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:g?x.jsx("tr",{children:x.jsx("td",{colSpan:"8",className:"text-center py-4",children:"Loading..."})}):0===l.length?x.jsx("tr",{children:x.jsx("td",{colSpan:"8",className:"text-center py-4",children:"No users found"})}):l.map(t=>x.jsxs("tr",{className:t.deleted_at?"table-danger":"",children:[x.jsx("td",{children:t.id}),x.jsx("td",{children:t.name}),x.jsx("td",{children:t.email}),x.jsx("td",{children:x.jsx("span",{className:"badge bg-"+("admin"===t.role?"danger":"nonprofit"===t.role?"primary":"info"),children:t.role})}),x.jsx("td",{children:t.deleted_at?x.jsx("span",{className:"badge bg-danger",children:"Suspended"}):x.jsx("span",{className:"badge bg-"+("active"===t.account_status?"success":"pending"===t.account_status?"warning":"secondary"),children:t.account_status})}),x.jsx("td",{children:t.researcherProfile?.affiliation||"-"}),x.jsx("td",{children:new Date(t.created_at).toLocaleDateString()}),x.jsx("td",{children:x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>w(t),title:"View Details",children:"Details"}),"pending"===t.account_status&&x.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>(async t=>{if(confirm("Approve this user account?"))try{const s=await fetch(`/api/admin/users/${t}/approve`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?(alert(a.message),U(),H()):alert(a.error)}catch(s){alert("Failed to approve user")}})(t.id),title:"Approve",children:x.jsx("i",{className:"bi bi-check-circle"})}),!t.deleted_at&&"admin"!==t.role&&x.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>(async(t,s)=>{const a=prompt(`Suspend user "${s}"?\n\nEnter reason (optional):`);if(null!==a)try{const s=await fetch(`/api/admin/users/${t}/suspend`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({reason:a})}),i=await s.json();s.ok?(alert(i.message),U(),H()):alert(i.error)}catch(i){alert("Failed to suspend user")}})(t.id,t.name),title:"Suspend",children:x.jsx("i",{className:"bi bi-pause-circle"})}),t.deleted_at&&x.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>(async t=>{if(confirm("Unsuspend this user account?"))try{const s=await fetch(`/api/admin/users/${t}/unsuspend`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?(alert(a.message),U(),H()):alert(a.error)}catch(s){alert("Failed to unsuspend user")}})(t.id),title:"Unsuspend",children:x.jsx("i",{className:"bi bi-play-circle"})}),"admin"!==t.role&&x.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async(t,s)=>{if(confirm(`PERMANENTLY DELETE user "${s}"?\n\nThis action CANNOT be undone!`))try{const s=await fetch(`/api/admin/users/${t}/permanent`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({confirmation:"DELETE"})}),a=await s.json();s.ok?(alert(a.message),U(),H()):alert(a.error)}catch(a){alert("Failed to delete user")}})(t.id,t.name),title:"Delete Permanently",children:x.jsx("i",{className:"bi bi-trash"})})]})})]},t.id))})]})})})]}),"projects"===a&&x.jsxs("div",{children:[x.jsx("div",{className:"card mb-3",children:x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsx("div",{className:"col-md-4",children:x.jsx("input",{type:"text",className:"form-control",placeholder:"Search projects...",value:F.search,onChange:e=>I({...F,search:e.target.value})})}),x.jsx("div",{className:"col-md-3",children:x.jsxs("select",{className:"form-select",value:F.status,onChange:e=>I({...F,status:e.target.value}),children:[x.jsx("option",{value:"",children:"All Statuses"}),x.jsx("option",{value:"draft",children:"Draft"}),x.jsx("option",{value:"open",children:"Open"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]})})}),x.jsx("div",{className:"card",children:x.jsx("div",{className:"table-responsive",children:x.jsxs("table",{className:"table table-hover mb-0",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Title"}),x.jsx("th",{children:"Organization"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Budget"}),x.jsx("th",{children:"Timeline"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:g?x.jsx("tr",{children:x.jsx("td",{colSpan:"7",className:"text-center py-4",children:"Loading..."})}):0===c.length?x.jsx("tr",{children:x.jsx("td",{colSpan:"7",className:"text-center py-4",children:"No projects found"})}):c.map(t=>x.jsxs("tr",{children:[x.jsx("td",{children:t.project_id}),x.jsx("td",{children:t.title}),x.jsx("td",{children:t.organization?.name||"-"}),x.jsx("td",{children:x.jsx("span",{className:"badge bg-"+("open"===t.status?"success":"in_progress"===t.status?"info":"completed"===t.status?"primary":"secondary"),children:t.status})}),x.jsxs("td",{children:["$",t.budget_min?.toLocaleString()||"N/A"]}),x.jsx("td",{children:t.timeline||"N/A"}),x.jsx("td",{children:x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsxs("button",{className:"btn btn-info btn-sm",onClick:()=>X(t),title:"View Details",children:[x.jsx("i",{className:"bi bi-eye"})," Details"]}),x.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>(async(t,s)=>{const a=prompt(`Change project status from "${s}"?\n\nEnter new status:\n- draft\n- open\n- in_progress\n- completed\n- cancelled`);if(a)try{const s=await fetch(`/api/admin/projects/${t}/status`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({status:a.toLowerCase()})}),i=await s.json();s.ok?(alert(i.message),W()):alert(i.error)}catch(i){alert("Failed to update project status")}})(t.project_id,t.status),title:"Change Status",children:x.jsx("i",{className:"bi bi-pencil"})}),x.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async(t,s)=>{const a=prompt(`Delete project "${s}"?\n\nEnter reason (optional):`);if(null!==a)try{const s=await fetch(`/api/admin/projects/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({reason:a})}),i=await s.json();s.ok?(alert(i.message),W(),H()):alert(i.error)}catch(i){alert("Failed to delete project")}})(t.project_id,t.title),title:"Delete",children:x.jsx("i",{className:"bi bi-trash"})})]})})]},t.project_id))})]})})})]}),"milestones"===a&&x.jsx("div",{className:"card",children:x.jsx("div",{className:"table-responsive",children:x.jsxs("table",{className:"table table-hover mb-0",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Name"}),x.jsx("th",{children:"Project"}),x.jsx("th",{children:"Organization"}),x.jsx("th",{children:"Due Date"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:g?x.jsx("tr",{children:x.jsx("td",{colSpan:"7",className:"text-center py-4",children:"Loading..."})}):0===u.length?x.jsx("tr",{children:x.jsx("td",{colSpan:"7",className:"text-center py-4",children:"No milestones found"})}):u.map(t=>x.jsxs("tr",{children:[x.jsx("td",{children:t.id}),x.jsx("td",{children:t.name}),x.jsx("td",{children:t.project?.title||"-"}),x.jsx("td",{children:t.project?.organization?.name||"-"}),x.jsx("td",{children:new Date(t.due_date).toLocaleDateString()}),x.jsx("td",{children:x.jsx("span",{className:"badge bg-"+("completed"===t.status?"success":"in_progress"===t.status?"info":"cancelled"===t.status?"danger":"secondary"),children:t.status})}),x.jsx("td",{children:x.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async(t,s)=>{const a=prompt(`Delete milestone "${s}"?\n\nEnter reason (optional):`);if(null!==a)try{const s=await fetch(`/api/admin/milestones/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({reason:a})}),i=await s.json();s.ok?(alert(i.message),V(),H()):alert(i.error)}catch(i){alert("Failed to delete milestone")}})(t.id,t.name),title:"Delete",children:x.jsx("i",{className:"bi bi-trash"})})})]},t.id))})]})})}),"pending-review"===a&&x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("h5",{className:"card-title mb-3",children:[x.jsx("i",{className:"bi bi-clipboard-check me-2"}),"Projects Pending Review"]}),g?x.jsx("div",{className:"text-center py-4",children:x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):0===m.length?x.jsxs("div",{className:"alert alert-info",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),"No projects pending review"]}):x.jsx("div",{className:"row",children:m.map(t=>x.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:x.jsxs("div",{className:"card h-100",children:[x.jsx("div",{className:"card-header bg-warning text-dark",children:x.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[x.jsx("h6",{className:"mb-0",children:t.title}),x.jsx("span",{className:"badge bg-"+("pending_review"===t.status?"primary":"warning"),children:t.status.replace("_"," ")})]})}),x.jsxs("div",{className:"card-body",children:[x.jsxs("p",{className:"text-muted small mb-2",children:[x.jsx("i",{className:"bi bi-building me-1"}),x.jsx("strong",{children:t.organization?.name||"Unknown"})]}),t.problem&&x.jsxs("p",{className:"small mb-2",children:[x.jsx("strong",{children:"Problem:"})," ",t.problem.substring(0,100),t.problem.length>100&&"..."]}),t.outcomes&&x.jsxs("p",{className:"small mb-2",children:[x.jsx("strong",{children:"Outcomes:"})," ",t.outcomes.substring(0,100),t.outcomes.length>100&&"..."]}),x.jsxs("div",{className:"small text-muted",children:[t.methods_required&&x.jsxs("div",{children:[x.jsx("i",{className:"bi bi-tools me-1"}),t.methods_required]}),t.timeline&&x.jsxs("div",{children:[x.jsx("i",{className:"bi bi-clock me-1"}),t.timeline]}),t.budget_min&&x.jsxs("div",{children:[x.jsx("i",{className:"bi bi-currency-dollar me-1"}),"$",parseFloat(t.budget_min).toLocaleString()]})]}),t.reviews&&t.reviews.length>0&&x.jsxs("div",{className:"mt-3 pt-3 border-top",children:[x.jsxs("small",{className:"text-muted d-block mb-2",children:[x.jsx("i",{className:"bi bi-clock-history me-1"}),"Review History (",t.reviews.length,")"]}),t.reviews.slice(0,2).map((e,t)=>x.jsxs("div",{className:"small mb-1",children:[x.jsx("span",{className:"badge bg-secondary me-1",children:e.action}),e.reviewer&&`by ${e.reviewer.name}`]},t))]})]}),x.jsx("div",{className:"card-footer bg-transparent",children:"pending_review"===t.status?x.jsxs("div",{className:"d-grid gap-2",children:[x.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>(async(t,s)=>{const a=prompt(`Approve project "${s}"?\n\nOptional feedback (leave blank for none):`);if(null!==a)try{const s=await fetch(`/api/admin/projects/${t}/approve`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({feedback:a||void 0})}),i=await s.json();s.ok?(alert(i.message),J(),H()):alert(i.error)}catch(i){alert("Failed to approve project")}})(t.project_id,t.title),children:[x.jsx("i",{className:"bi bi-check-circle me-1"}),"Approve"]}),x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsxs("button",{className:"btn btn-warning",onClick:()=>(async(t,s)=>{const a=prompt(`Request changes for project "${s}"?\n\nSpecify required changes:`);if(!a)return;const i=prompt("Additional feedback (optional):");if(null!==i)try{const s=await fetch(`/api/admin/projects/${t}/request-changes`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({changes_requested:a,feedback:i||void 0})}),n=await s.json();s.ok?(alert(n.message),J(),H()):alert(n.error)}catch(n){alert("Failed to request changes")}})(t.project_id,t.title),children:[x.jsx("i",{className:"bi bi-pencil-square me-1"}),"Request Changes"]}),x.jsxs("button",{className:"btn btn-danger",onClick:()=>(async(t,s)=>{const a=prompt(`Reject project "${s}"?\n\nRejection reason (required):`);if(a)try{const s=await fetch(`/api/admin/projects/${t}/reject`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({rejection_reason:a})}),i=await s.json();s.ok?(alert(i.message),J(),H()):alert(i.error)}catch(i){alert("Failed to reject project")}})(t.project_id,t.title),children:[x.jsx("i",{className:"bi bi-x-circle me-1"}),"Reject"]})]})]}):x.jsx("div",{className:"alert alert-warning alert-sm mb-0",children:x.jsx("small",{children:"Awaiting nonprofit revisions"})})})]})},t.project_id))})]})}),"organizations"===a&&x.jsx("div",{className:"card",children:x.jsx("div",{className:"table-responsive",children:x.jsxs("table",{className:"table table-hover mb-0",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Name"}),x.jsx("th",{children:"EIN"}),x.jsx("th",{children:"Contacts"}),x.jsx("th",{children:"Focus Areas"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:g?x.jsx("tr",{children:x.jsx("td",{colSpan:"6",className:"text-center py-4",children:"Loading..."})}):0===f.length?x.jsx("tr",{children:x.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No organizations found"})}):f.map(t=>x.jsxs("tr",{children:[x.jsx("td",{children:t.id}),x.jsx("td",{children:t.name}),x.jsx("td",{children:t.EIN}),x.jsx("td",{children:t.contacts||"-"}),x.jsx("td",{children:t.focus_tags||"-"}),x.jsx("td",{children:x.jsxs("div",{className:"btn-group btn-group-sm",children:[x.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>C(t),title:"View Details",children:"Details"}),x.jsxs("button",{className:"btn btn-danger btn-sm",onClick:()=>(async(t,s)=>{if(confirm(`PERMANENTLY DELETE organization "${s}" and ALL associated projects?\n\nThis action CANNOT be undone!`))try{const s=await fetch(`/api/admin/organizations/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({confirmation:"DELETE"})}),a=await s.json();s.ok?(alert(a.message),Y(),H()):alert(a.error)}catch(a){alert("Failed to delete organization")}})(t.id,t.name),title:"Delete Organization & All Projects",children:[x.jsx("i",{className:"bi bi-trash"})," Delete All"]})]})})]},t.id))})]})})}),_&&x.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:x.jsx("div",{className:"modal-dialog modal-lg",children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("h5",{className:"modal-title",children:[x.jsx("i",{className:"bi bi-person-circle me-2"}),"User Details"]}),x.jsx("button",{type:"button",className:"btn-close",onClick:()=>w(null)})]}),x.jsx("div",{className:"modal-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"User ID"}),x.jsx("p",{className:"form-control-plaintext",children:_.id})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Name"}),x.jsx("p",{className:"form-control-plaintext",children:_.name})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Email"}),x.jsx("p",{className:"form-control-plaintext",children:_.email})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Role"}),x.jsx("p",{className:"form-control-plaintext",children:x.jsx("span",{className:"badge bg-"+("admin"===_.role?"danger":"nonprofit"===_.role?"primary":"info"),children:_.role})})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Account Status"}),x.jsx("p",{className:"form-control-plaintext",children:_.deleted_at?x.jsx("span",{className:"badge bg-danger",children:"Suspended"}):x.jsx("span",{className:"badge bg-"+("active"===_.account_status?"success":"pending"===_.account_status?"warning":"secondary"),children:_.account_status})})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Created At"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(_.created_at).toLocaleString()})]}),_.updated_at&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Last Updated"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(_.updated_at).toLocaleString()})]}),_.deleted_at&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Suspended At"}),x.jsx("p",{className:"form-control-plaintext text-danger",children:new Date(_.deleted_at).toLocaleString()})]}),_.researcherProfile&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"col-12",children:[x.jsx("hr",{}),x.jsxs("h6",{className:"text-primary",children:[x.jsx("i",{className:"bi bi-mortarboard me-2"}),"Researcher Profile"]})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Affiliation"}),x.jsx("p",{className:"form-control-plaintext",children:_.researcherProfile.affiliation||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Domains"}),x.jsx("p",{className:"form-control-plaintext",children:_.researcherProfile.domains||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Methods"}),x.jsx("p",{className:"form-control-plaintext",children:_.researcherProfile.methods||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Tools"}),x.jsx("p",{className:"form-control-plaintext",children:_.researcherProfile.tools||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Hourly Rate"}),x.jsxs("p",{className:"form-control-plaintext",children:["$",_.researcherProfile.rate_min||0," - $",_.researcherProfile.rate_max||0]})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Availability"}),x.jsx("p",{className:"form-control-plaintext",children:_.researcherProfile.availability||"N/A"})]})]}),_.organization&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"col-12",children:[x.jsx("hr",{}),x.jsxs("h6",{className:"text-primary",children:[x.jsx("i",{className:"bi bi-building me-2"}),"Organization"]})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Organization Name"}),x.jsx("p",{className:"form-control-plaintext",children:_.organization.name})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"EIN"}),x.jsx("p",{className:"form-control-plaintext",children:_.organization.EIN||"N/A"})]})]})]})}),x.jsx("div",{className:"modal-footer",children:x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>w(null),children:"Close"})})]})})}),k&&x.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:x.jsx("div",{className:"modal-dialog modal-lg",children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("h5",{className:"modal-title",children:[x.jsx("i",{className:"bi bi-building me-2"}),"Organization Details"]}),x.jsx("button",{type:"button",className:"btn-close",onClick:()=>C(null)})]}),x.jsx("div",{className:"modal-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Organization ID"}),x.jsx("p",{className:"form-control-plaintext",children:k.id})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Name"}),x.jsx("p",{className:"form-control-plaintext",children:k.name})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"EIN"}),x.jsx("p",{className:"form-control-plaintext",children:k.EIN||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Website"}),x.jsx("p",{className:"form-control-plaintext",children:k.website?x.jsx("a",{href:k.website,target:"_blank",rel:"noopener noreferrer",children:k.website}):"N/A"})]}),k.mission&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Mission"}),x.jsx("p",{className:"form-control-plaintext",children:k.mission})]}),k.description&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Description"}),x.jsx("p",{className:"form-control-plaintext",children:k.description})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Contacts"}),x.jsx("p",{className:"form-control-plaintext",children:k.contacts||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Focus Areas"}),x.jsx("p",{className:"form-control-plaintext",children:k.focus_tags||"N/A"})]}),k.address&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Address"}),x.jsx("p",{className:"form-control-plaintext",children:k.address})]}),k.created_at&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Created At"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(k.created_at).toLocaleString()})]}),k.updated_at&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Last Updated"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(k.updated_at).toLocaleString()})]}),k.users&&k.users.length>0&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"col-12",children:[x.jsx("hr",{}),x.jsxs("h6",{className:"text-primary",children:[x.jsx("i",{className:"bi bi-people me-2"}),"Associated Users (",k.users.length,")"]})]}),x.jsx("div",{className:"col-12",children:x.jsx("ul",{className:"list-group",children:k.users.map(e=>x.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[x.jsxs("div",{children:[x.jsx("strong",{children:e.name}),x.jsx("br",{}),x.jsx("small",{className:"text-muted",children:e.email})]}),x.jsx("span",{className:"badge bg-"+("active"===e.account_status?"success":"warning"),children:e.account_status})]},e.id))})})]})]})}),x.jsx("div",{className:"modal-footer",children:x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(null),children:"Close"})})]})})}),A&&x.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:x.jsx("div",{className:"modal-dialog modal-xl",children:x.jsxs("div",{className:"modal-content",children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("h5",{className:"modal-title",children:[x.jsx("i",{className:"bi bi-folder me-2"}),"Project Details"]}),x.jsx("button",{type:"button",className:"btn-close",onClick:()=>{E(null),P(null)}})]}),x.jsx("div",{className:"modal-body",children:O?x.jsxs("div",{className:"text-center py-5",children:[x.jsx("div",{className:"spinner-border text-primary",role:"status",children:x.jsx("span",{className:"visually-hidden",children:"Loading..."})}),x.jsx("p",{className:"mt-3 text-muted",children:"Loading project details..."})]}):T?x.jsxs("div",{className:"row g-4",children:[x.jsx("div",{className:"col-12",children:x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"card-header bg-primary text-white",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-info-circle me-2"}),"Basic Information"]})}),x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Project ID"}),x.jsx("p",{className:"form-control-plaintext",children:T.project_id})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Status"}),x.jsx("p",{className:"form-control-plaintext",children:x.jsx("span",{className:"badge bg-"+("open"===T.status?"success":"in_progress"===T.status?"info":"completed"===T.status?"primary":"secondary"),children:T.status})})]}),x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Title"}),x.jsx("p",{className:"form-control-plaintext",children:T.title})]}),T.problem&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Problem Statement"}),x.jsx("p",{className:"form-control-plaintext",children:T.problem})]}),T.outcomes&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Expected Outcomes"}),x.jsx("p",{className:"form-control-plaintext",children:T.outcomes})]}),T.description&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Description"}),x.jsx("p",{className:"form-control-plaintext",children:T.description})]})]})})]})}),T.organization&&x.jsx("div",{className:"col-12",children:x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"card-header bg-success text-white",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-building me-2"}),"Organization"]})}),x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Organization Name"}),x.jsx("p",{className:"form-control-plaintext",children:T.organization.name})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"EIN"}),x.jsx("p",{className:"form-control-plaintext",children:T.organization.EIN||"N/A"})]}),T.organization.mission&&x.jsxs("div",{className:"col-12",children:[x.jsx("label",{className:"form-label fw-bold",children:"Mission"}),x.jsx("p",{className:"form-control-plaintext",children:T.organization.mission})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Focus Areas"}),x.jsx("p",{className:"form-control-plaintext",children:T.organization.focus_tags||"N/A"})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Contacts"}),x.jsx("p",{className:"form-control-plaintext",children:T.organization.contacts||"N/A"})]})]})})]})}),x.jsx("div",{className:"col-12",children:x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"card-header bg-info text-white",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-clipboard-data me-2"}),"Project Requirements & Details"]})}),x.jsx("div",{className:"card-body",children:x.jsxs("div",{className:"row g-3",children:[T.methods_required&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Methods Required"}),x.jsx("p",{className:"form-control-plaintext",children:T.methods_required})]}),T.timeline&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Timeline"}),x.jsxs("p",{className:"form-control-plaintext",children:[x.jsx("i",{className:"bi bi-clock me-1"}),T.timeline]})]}),(T.budget_min||T.budget_max)&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Budget Range"}),x.jsxs("p",{className:"form-control-plaintext",children:[x.jsx("i",{className:"bi bi-currency-dollar me-1"}),"$",parseFloat(T.budget_min||0).toLocaleString()," - $",parseFloat(T.budget_max||0).toLocaleString()]})]}),T.expertise_required&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Expertise Required"}),x.jsx("p",{className:"form-control-plaintext",children:T.expertise_required})]}),T.domains&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Domains"}),x.jsx("p",{className:"form-control-plaintext",children:T.domains})]}),T.tools&&x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Tools"}),x.jsx("p",{className:"form-control-plaintext",children:T.tools})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Created"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(T.created_at).toLocaleString()})]}),x.jsxs("div",{className:"col-md-6",children:[x.jsx("label",{className:"form-label fw-bold",children:"Last Updated"}),x.jsx("p",{className:"form-control-plaintext",children:new Date(T.updated_at).toLocaleString()})]})]})})]})}),T.milestones&&T.milestones.length>0&&x.jsx("div",{className:"col-12",children:x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"card-header bg-warning text-dark",children:x.jsxs("h6",{className:"mb-0",children:[x.jsx("i",{className:"bi bi-flag me-2"}),"Milestones (",T.milestones.length,")"]})}),x.jsx("div",{className:"card-body",children:x.jsx("div",{className:"table-responsive",children:x.jsxs("table",{className:"table table-sm table-hover mb-0",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Name"}),x.jsx("th",{children:"Description"}),x.jsx("th",{children:"Due Date"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Completed"})]})}),x.jsx("tbody",{children:T.milestones.map(e=>x.jsxs("tr",{children:[x.jsx("td",{children:x.jsx("strong",{children:e.name})}),x.jsx("td",{children:e.description||"-"}),x.jsxs("td",{children:[x.jsx("i",{className:"bi bi-calendar3 me-1"}),new Date(e.due_date).toLocaleDateString()]}),x.jsx("td",{children:x.jsx("span",{className:"badge bg-"+("completed"===e.status?"success":"in_progress"===e.status?"info":"cancelled"===e.status?"danger":"secondary"),children:e.status})}),x.jsx("td",{children:e.completed_at?x.jsxs("span",{className:"text-success",children:[x.jsx("i",{className:"bi bi-check-circle me-1"}),new Date(e.completed_at).toLocaleDateString()]}):"-"})]},e.id))})]})})})]})})]}):x.jsxs("div",{className:"alert alert-warning",children:[x.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Failed to load project details"]})}),x.jsx("div",{className:"modal-footer",children:x.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{E(null),P(null)},children:"Close"})})]})})})]}),x.jsx(z,{})]})}function pe({children:e,requiredRole:t}){const{user:s,loading:a}=y();return a?x.jsx("div",{children:"Loading..."}):s?t&&s.role!==t?x.jsx(l,{to:"/dashboard",replace:!0}):e:x.jsx(l,{to:"/",replace:!0})}function fe(){const[e,t]=s.useState(1),[a,i]=s.useState({1:[],2:[]}),[r,l]=s.useState(""),o=s.useRef(null);s.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[a,e]),s.useEffect(()=>{fetch(B(`/api/messages/thread/${e}`)).then(e=>e.json()).then(t=>{console.log("THREAD LOADED:",t),t.success&&i(s=>({...s,[e]:t.messages}))})},[e]);const c=async()=>{if(!r.trim())return;const t={thread_id:e,sender_id:1,recipient_id:2,body:r};try{await fetch(B("/api/messages/send"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});const s={sender_id:1,body:r,created_at:(new Date).toISOString()};i(t=>({...t,[e]:[...t[e],s]})),l("")}catch(s){console.error("Send error:",s)}};function d({msg:e}){const t=1===e.sender_id,s=new Date(e.created_at).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return x.jsxs("div",{className:t?"bubble-outgoing":"bubble-incoming",children:[x.jsx("p",{className:"bubble-text",children:e.body}),x.jsx("p",{className:"bubble-time",children:s})]})}return x.jsxs("div",{className:"messages-container",children:[x.jsxs("aside",{className:"sidebar",children:[x.jsxs("div",{className:"sidebar-top",children:[x.jsx(n,{to:"/",className:"home-button",children:"← Home"}),x.jsx("h2",{className:"sidebar-title",children:"Messages"})]}),x.jsxs("div",{className:"chat-list",children:[x.jsx("button",{className:1===e?"chat-item selected":"chat-item",onClick:()=>t(1),children:"Group 1"}),x.jsx("button",{className:2===e?"chat-item selected":"chat-item",onClick:()=>t(2),children:"Individual"})]})]}),x.jsxs("main",{className:"chat-area",children:[x.jsx("header",{className:"chat-header",children:x.jsx("h2",{children:{1:"Group 1",2:"Individual"}[e]})}),x.jsx("div",{className:"chat-content",children:x.jsxs("div",{className:"message-list",children:[a[e]?.map((e,t)=>x.jsx(d,{msg:e},t)),x.jsx("div",{ref:o})]})}),x.jsxs("footer",{className:"chat-input-bar",children:[x.jsx("input",{type:"text",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&c(),placeholder:"Type a message...",className:"chat-input"}),x.jsx("button",{className:"send-button",onClick:c,children:"➤"})]})]})]})}function be(){return x.jsxs(o,{children:[x.jsx(c,{path:"/",element:x.jsx(M,{})}),x.jsx(c,{path:"/browse",element:x.jsx(he,{})}),x.jsx(c,{path:"/dashboard/:role",element:x.jsx(te,{})}),x.jsx(c,{path:"/admin",element:x.jsx(pe,{requireAdmin:!0,children:x.jsx(ue,{})})}),x.jsx(c,{path:"/settings",element:x.jsx(oe,{})}),x.jsx(c,{path:"/messages",element:x.jsx(fe,{})})]})}function xe(){const[e,t]=s.useState(!1);return x.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px"},children:e?x.jsxs("div",{style:{width:320,height:380,background:"white",border:"1px solid #ccc",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column"},children:[x.jsxs("div",{style:{background:"#007bff",color:"white",padding:"10px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:["Chat",x.jsx("button",{onClick:()=>t(!1),style:{float:"right",background:"transparent",border:"none",color:"white",fontWeight:"bold"},children:"✕"})]}),x.jsx("div",{style:{flex:1,overflowY:"auto",padding:"10px",fontSize:"14px"},children:x.jsx("p",{children:"No messages yet."})}),x.jsxs("div",{style:{padding:"10px"},children:[x.jsx("textarea",{placeholder:"Type your message...",rows:2,style:{width:"100%",resize:"none"}}),x.jsx("button",{className:"btn btn-primary w-100 mt-2",children:"Send"})]})]}):x.jsx("button",{className:"btn btn-primary",onClick:()=>t(!0),children:"💬 Chat"})})}var ge,je={exports:{}};
/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */function ve(){const{user:e}=y(),t="/"===m().pathname;return x.jsxs(x.Fragment,{children:[x.jsx(be,{}),e&&t&&x.jsx(xe,{})]})}ge||(ge=1,je.exports=function(){const e=new Map,t={set(t,s,a){e.has(t)||e.set(t,new Map);const i=e.get(t);i.has(s)||0===i.size?i.set(s,a):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,s)=>e.has(t)&&e.get(t).get(s)||null,remove(t,s){if(!e.has(t))return;const a=e.get(t);a.delete(s),0===a.size&&e.delete(t)}},s="transitionend",a=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),i=e=>{e.dispatchEvent(new Event(s))},n=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),r=e=>n(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(a(e)):null,l=e=>{if(!n(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),s=e.closest("details:not([open])");if(!s)return t;if(s!==e){const t=e.closest("summary");if(t&&t.parentNode!==s)return!1;if(null===t)return!1}return t},o=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),c=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?c(e.parentNode):null},d=()=>{},m=e=>{e.offsetHeight},h=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,u=[],p=()=>"rtl"===document.documentElement.dir,f=e=>{var t;t=()=>{const t=h();if(t){const s=e.NAME,a=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=a,e.jQueryInterface)}},"loading"===document.readyState?(u.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of u)e()}),u.push(t)):t()},b=(e,t=[],s=e)=>"function"==typeof e?e(...t):s,x=(e,t,a=!0)=>{if(!a)return void b(e);const n=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e);const a=Number.parseFloat(t),i=Number.parseFloat(s);return a||i?(t=t.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(s))):0})(t)+5;let r=!1;const l=({target:a})=>{a===t&&(r=!0,t.removeEventListener(s,l),b(e))};t.addEventListener(s,l),setTimeout(()=>{r||i(t)},n)},g=(e,t,s,a)=>{const i=e.length;let n=e.indexOf(t);return-1===n?!s&&a?e[i-1]:e[0]:(n+=s?1:-1,a&&(n=(n+i)%i),e[Math.max(0,Math.min(n,i-1))])},j=/[^.]*(?=\..*)\.|.*/,v=/\..*/,N=/::\d+$/,y={};let _=1;const w={mouseenter:"mouseover",mouseleave:"mouseout"},k=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function C(e,t){return t&&`${t}::${_++}`||e.uidEvent||_++}function S(e){const t=C(e);return e.uidEvent=t,y[t]=y[t]||{},y[t]}function A(e,t,s=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===s)}function E(e,t,s){const a="string"==typeof t,i=a?s:t||s;let n=D(e);return k.has(n)||(n=e),[a,i,n]}function T(e,t,s,a,i){if("string"!=typeof t||!e)return;let[n,r,l]=E(t,s,a);var o;t in w&&(o=r,r=function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return o.call(this,e)});const c=S(e),d=c[l]||(c[l]={}),m=A(d,r,n?s:null);if(m)return void(m.oneOff=m.oneOff&&i);const h=C(r,t.replace(j,"")),u=n?function(e,t,s){return function a(i){const n=e.querySelectorAll(t);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(const l of n)if(l===r)return L(i,{delegateTarget:r}),a.oneOff&&$.off(e,i.type,t,s),s.apply(r,[i])}}(e,s,r):function(e,t){return function s(a){return L(a,{delegateTarget:e}),s.oneOff&&$.off(e,a.type,t),t.apply(e,[a])}}(e,r);u.delegationSelector=n?s:null,u.callable=r,u.oneOff=i,u.uidEvent=h,d[h]=u,e.addEventListener(l,u,n)}function P(e,t,s,a,i){const n=A(t[s],a,i);n&&(e.removeEventListener(s,n,Boolean(i)),delete t[s][n.uidEvent])}function O(e,t,s,a){const i=t[s]||{};for(const[n,r]of Object.entries(i))n.includes(a)&&P(e,t,s,r.callable,r.delegationSelector)}function D(e){return e=e.replace(v,""),w[e]||e}const $={on(e,t,s,a){T(e,t,s,a,!1)},one(e,t,s,a){T(e,t,s,a,!0)},off(e,t,s,a){if("string"!=typeof t||!e)return;const[i,n,r]=E(t,s,a),l=r!==t,o=S(e),c=o[r]||{},d=t.startsWith(".");if(void 0===n){if(d)for(const s of Object.keys(o))O(e,o,s,t.slice(1));for(const[s,a]of Object.entries(c)){const i=s.replace(N,"");l&&!t.includes(i)||P(e,o,r,a.callable,a.delegationSelector)}}else{if(!Object.keys(c).length)return;P(e,o,r,n,i?s:null)}},trigger(e,t,s){if("string"!=typeof t||!e)return null;const a=h();let i=null,n=!0,r=!0,l=!1;t!==D(t)&&a&&(i=a.Event(t,s),a(e).trigger(i),n=!i.isPropagationStopped(),r=!i.isImmediatePropagationStopped(),l=i.isDefaultPrevented());const o=L(new Event(t,{bubbles:n,cancelable:!0}),s);return l&&o.preventDefault(),r&&e.dispatchEvent(o),o.defaultPrevented&&i&&i.preventDefault(),o}};function L(e,t={}){for(const[a,i]of Object.entries(t))try{e[a]=i}catch(s){Object.defineProperty(e,a,{configurable:!0,get:()=>i})}return e}function F(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function I(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const z={setDataAttribute(e,t,s){e.setAttribute(`data-bs-${I(t)}`,s)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${I(t)}`)},getDataAttributes(e){if(!e)return{};const t={},s=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const a of s){let s=a.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=F(e.dataset[a])}return t},getDataAttribute:(e,t)=>F(e.getAttribute(`data-bs-${I(t)}`))};class M{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const s=n(t)?z.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof s?s:{},...n(t)?z.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[a,i]of Object.entries(t)){const t=e[a],r=n(t)?"element":null==(s=t)?`${s}`:Object.prototype.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${a}" provided type "${r}" but expected type "${i}".`)}var s}}class R extends M{constructor(e,s){super(),(e=r(e))&&(this._element=e,this._config=this._getConfig(s),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,s=!0){x(e,t,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(r(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const B=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?a(s.trim()):null}return t},q={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const s=[];let a=e.parentNode.closest(t);for(;a;)s.push(a),a=a.parentNode.closest(t);return s},prev(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return[s];s=s.previousElementSibling}return[]},next(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return[s];s=s.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!o(e)&&l(e))},getSelectorFromElement(e){const t=B(e);return t&&q.findOne(t)?t:null},getElementFromSelector(e){const t=B(e);return t?q.findOne(t):null},getMultipleElementsFromSelector(e){const t=B(e);return t?q.find(t):[]}},H=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,a=e.NAME;$.on(document,s,`[data-bs-dismiss="${a}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),o(this))return;const i=q.getElementFromSelector(this)||this.closest(`.${a}`);e.getOrCreateInstance(i)[t]()})},U=".bs.alert",W=`close${U}`,V=`closed${U}`;class Y extends R{static get NAME(){return"alert"}close(){if($.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),$.trigger(this._element,V),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Y.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}H(Y,"close"),f(Y);const J='[data-bs-toggle="button"]';class X extends R{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=X.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}$.on(document,"click.bs.button.data-api",J,e=>{e.preventDefault();const t=e.target.closest(J);X.getOrCreateInstance(t).toggle()}),f(X);const Q=".bs.swipe",K=`touchstart${Q}`,G=`touchmove${Q}`,Z=`touchend${Q}`,ee=`pointerdown${Q}`,te=`pointerup${Q}`,se={endCallback:null,leftCallback:null,rightCallback:null},ae={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ie extends M{constructor(e,t){super(),this._element=e,e&&ie.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return se}static get DefaultType(){return ae}static get NAME(){return"swipe"}dispose(){$.off(this._element,Q)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),b(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&b(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,ee,e=>this._start(e)),$.on(this._element,te,e=>this._end(e)),this._element.classList.add("pointer-event")):($.on(this._element,K,e=>this._start(e)),$.on(this._element,G,e=>this._move(e)),$.on(this._element,Z,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ne=".bs.carousel",re=".data-api",le="next",oe="prev",ce="left",de="right",me=`slide${ne}`,he=`slid${ne}`,ue=`keydown${ne}`,pe=`mouseenter${ne}`,fe=`mouseleave${ne}`,be=`dragstart${ne}`,xe=`load${ne}${re}`,ge=`click${ne}${re}`,je="carousel",ve="active",Ne=".active",ye=".carousel-item",_e=Ne+ye,we={ArrowLeft:de,ArrowRight:ce},ke={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ce={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Se extends R{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=q.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===je&&this.cycle()}static get Default(){return ke}static get DefaultType(){return Ce}static get NAME(){return"carousel"}next(){this._slide(le)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(oe)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?$.one(this._element,he,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void $.one(this._element,he,()=>this.to(e));const s=this._getItemIndex(this._getActive());if(s===e)return;const a=e>s?le:oe;this._slide(a,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&$.on(this._element,ue,e=>this._keydown(e)),"hover"===this._config.pause&&($.on(this._element,pe,()=>this.pause()),$.on(this._element,fe,()=>this._maybeEnableCycle())),this._config.touch&&ie.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of q.find(".carousel-item img",this._element))$.on(t,be,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(ce)),rightCallback:()=>this._slide(this._directionToOrder(de)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ie(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=we[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=q.findOne(Ne,this._indicatorsElement);t.classList.remove(ve),t.removeAttribute("aria-current");const s=q.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(ve),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const s=this._getActive(),a=e===le,i=t||g(this._getItems(),s,a,this._config.wrap);if(i===s)return;const n=this._getItemIndex(i),r=t=>$.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:n});if(r(me).defaultPrevented)return;if(!s||!i)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(n),this._activeElement=i;const o=a?"carousel-item-start":"carousel-item-end",c=a?"carousel-item-next":"carousel-item-prev";i.classList.add(c),m(i),s.classList.add(o),i.classList.add(o),this._queueCallback(()=>{i.classList.remove(o,c),i.classList.add(ve),s.classList.remove(ve,c,o),this._isSliding=!1,r(he)},s,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return q.findOne(_e,this._element)}_getItems(){return q.find(ye,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return p()?e===ce?oe:le:e===ce?le:oe}_orderToDirection(e){return p()?e===oe?ce:de:e===oe?de:ce}static jQueryInterface(e){return this.each(function(){const t=Se.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}$.on(document,ge,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=q.getElementFromSelector(this);if(!t||!t.classList.contains(je))return;e.preventDefault();const s=Se.getOrCreateInstance(t),a=this.getAttribute("data-bs-slide-to");return a?(s.to(a),void s._maybeEnableCycle()):"next"===z.getDataAttribute(this,"slide")?(s.next(),void s._maybeEnableCycle()):(s.prev(),void s._maybeEnableCycle())}),$.on(window,xe,()=>{const e=q.find('[data-bs-ride="carousel"]');for(const t of e)Se.getOrCreateInstance(t)}),f(Se);const Ae=".bs.collapse",Ee=`show${Ae}`,Te=`shown${Ae}`,Pe=`hide${Ae}`,Oe=`hidden${Ae}`,De=`click${Ae}.data-api`,$e="show",Le="collapse",Fe="collapsing",Ie=`:scope .${Le} .${Le}`,ze='[data-bs-toggle="collapse"]',Me={parent:null,toggle:!0},Re={parent:"(null|element)",toggle:"boolean"};class Be extends R{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const s=q.find(ze);for(const a of s){const e=q.getSelectorFromElement(a),t=q.find(e).filter(e=>e===this._element);null!==e&&t.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Me}static get DefaultType(){return Re}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>Be.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if($.trigger(this._element,Ee).defaultPrevented)return;for(const a of e)a.hide();const t=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(Fe),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(Le,$e),this._element.style[t]="",$.trigger(this._element,Te)},this._element,!0),this._element.style[t]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if($.trigger(this._element,Pe).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,m(this._element),this._element.classList.add(Fe),this._element.classList.remove(Le,$e);for(const t of this._triggerArray){const e=q.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(Le),$.trigger(this._element,Oe)},this._element,!0)}_isShown(e=this._element){return e.classList.contains($e)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=r(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(ze);for(const t of e){const e=q.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=q.find(Ie,this._config.parent);return q.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const s of e)s.classList.toggle("collapsed",!t),s.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const s=Be.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e]()}})}}$.on(document,De,ze,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of q.getMultipleElementsFromSelector(this))Be.getOrCreateInstance(t,{toggle:!1}).toggle()}),f(Be);var qe="top",He="bottom",Ue="right",We="left",Ve="auto",Ye=[qe,He,Ue,We],Je="start",Xe="end",Qe="clippingParents",Ke="viewport",Ge="popper",Ze="reference",et=Ye.reduce(function(e,t){return e.concat([t+"-"+Je,t+"-"+Xe])},[]),tt=[].concat(Ye,[Ve]).reduce(function(e,t){return e.concat([t,t+"-"+Je,t+"-"+Xe])},[]),st="beforeRead",at="read",it="afterRead",nt="beforeMain",rt="main",lt="afterMain",ot="beforeWrite",ct="write",dt="afterWrite",mt=[st,at,it,nt,rt,lt,ot,ct,dt];function ht(e){return e?(e.nodeName||"").toLowerCase():null}function ut(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pt(e){return e instanceof ut(e).Element||e instanceof Element}function ft(e){return e instanceof ut(e).HTMLElement||e instanceof HTMLElement}function bt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ut(e).ShadowRoot||e instanceof ShadowRoot)}const xt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},a=t.attributes[e]||{},i=t.elements[e];ft(i)&&ht(i)&&(Object.assign(i.style,s),Object.keys(a).forEach(function(e){var t=a[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(e){var a=t.elements[e],i=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:s[e]).reduce(function(e,t){return e[t]="",e},{});ft(a)&&ht(a)&&(Object.assign(a.style,n),Object.keys(i).forEach(function(e){a.removeAttribute(e)}))})}},requires:["computeStyles"]};function gt(e){return e.split("-")[0]}var jt=Math.max,vt=Math.min,Nt=Math.round;function yt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function _t(){return!/^((?!chrome|android).)*safari/i.test(yt())}function wt(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);var a=e.getBoundingClientRect(),i=1,n=1;t&&ft(e)&&(i=e.offsetWidth>0&&Nt(a.width)/e.offsetWidth||1,n=e.offsetHeight>0&&Nt(a.height)/e.offsetHeight||1);var r=(pt(e)?ut(e):window).visualViewport,l=!_t()&&s,o=(a.left+(l&&r?r.offsetLeft:0))/i,c=(a.top+(l&&r?r.offsetTop:0))/n,d=a.width/i,m=a.height/n;return{width:d,height:m,top:c,right:o+d,bottom:c+m,left:o,x:o,y:c}}function kt(e){var t=wt(e),s=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:a}}function Ct(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&bt(s)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function St(e){return ut(e).getComputedStyle(e)}function At(e){return["table","td","th"].indexOf(ht(e))>=0}function Et(e){return((pt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Tt(e){return"html"===ht(e)?e:e.assignedSlot||e.parentNode||(bt(e)?e.host:null)||Et(e)}function Pt(e){return ft(e)&&"fixed"!==St(e).position?e.offsetParent:null}function Ot(e){for(var t=ut(e),s=Pt(e);s&&At(s)&&"static"===St(s).position;)s=Pt(s);return s&&("html"===ht(s)||"body"===ht(s)&&"static"===St(s).position)?t:s||function(e){var t=/firefox/i.test(yt());if(/Trident/i.test(yt())&&ft(e)&&"fixed"===St(e).position)return null;var s=Tt(e);for(bt(s)&&(s=s.host);ft(s)&&["html","body"].indexOf(ht(s))<0;){var a=St(s);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||t&&"filter"===a.willChange||t&&a.filter&&"none"!==a.filter)return s;s=s.parentNode}return null}(e)||t}function Dt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $t(e,t,s){return jt(e,vt(t,s))}function Lt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ft(e,t){return t.reduce(function(t,s){return t[s]=e,t},{})}const It={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,s,a,i=e.state,n=e.name,r=e.options,l=i.elements.arrow,o=i.modifiersData.popperOffsets,c=gt(i.placement),d=Dt(c),m=[We,Ue].indexOf(c)>=0?"height":"width";if(l&&o){var h=(s=r.padding,a=i,Lt("number"!=typeof(s="function"==typeof s?s(Object.assign({},a.rects,{placement:a.placement})):s)?s:Ft(s,Ye))),u=kt(l),p="y"===d?qe:We,f="y"===d?He:Ue,b=i.rects.reference[m]+i.rects.reference[d]-o[d]-i.rects.popper[m],x=o[d]-i.rects.reference[d],g=Ot(l),j=g?"y"===d?g.clientHeight||0:g.clientWidth||0:0,v=b/2-x/2,N=h[p],y=j-u[m]-h[f],_=j/2-u[m]/2+v,w=$t(N,_,y),k=d;i.modifiersData[n]=((t={})[k]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,s=e.options.element,a=void 0===s?"[data-popper-arrow]":s;null!=a&&("string"!=typeof a||(a=t.elements.popper.querySelector(a)))&&Ct(t.elements.popper,a)&&(t.elements.arrow=a)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zt(e){return e.split("-")[1]}var Mt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rt(e){var t,s=e.popper,a=e.popperRect,i=e.placement,n=e.variation,r=e.offsets,l=e.position,o=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,m=e.isFixed,h=r.x,u=void 0===h?0:h,p=r.y,f=void 0===p?0:p,b="function"==typeof d?d({x:u,y:f}):{x:u,y:f};u=b.x,f=b.y;var x=r.hasOwnProperty("x"),g=r.hasOwnProperty("y"),j=We,v=qe,N=window;if(c){var y=Ot(s),_="clientHeight",w="clientWidth";y===ut(s)&&"static"!==St(y=Et(s)).position&&"absolute"===l&&(_="scrollHeight",w="scrollWidth"),(i===qe||(i===We||i===Ue)&&n===Xe)&&(v=He,f-=(m&&y===N&&N.visualViewport?N.visualViewport.height:y[_])-a.height,f*=o?1:-1),i!==We&&(i!==qe&&i!==He||n!==Xe)||(j=Ue,u-=(m&&y===N&&N.visualViewport?N.visualViewport.width:y[w])-a.width,u*=o?1:-1)}var k,C,S,A,E,T,P=Object.assign({position:l},c&&Mt),O=!0===d?(C={x:u,y:f},S=ut(s),A=C.x,E=C.y,T=S.devicePixelRatio||1,{x:Nt(A*T)/T||0,y:Nt(E*T)/T||0}):{x:u,y:f};return u=O.x,f=O.y,o?Object.assign({},P,((k={})[v]=g?"0":"",k[j]=x?"0":"",k.transform=(N.devicePixelRatio||1)<=1?"translate("+u+"px, "+f+"px)":"translate3d("+u+"px, "+f+"px, 0)",k)):Object.assign({},P,((t={})[v]=g?f+"px":"",t[j]=x?u+"px":"",t.transform="",t))}const Bt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,s=e.options,a=s.gpuAcceleration,i=void 0===a||a,n=s.adaptive,r=void 0===n||n,l=s.roundOffsets,o=void 0===l||l,c={placement:gt(t.placement),variation:zt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Rt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:o})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Rt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var qt={passive:!0};const Ht={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,s=e.instance,a=e.options,i=a.scroll,n=void 0===i||i,r=a.resize,l=void 0===r||r,o=ut(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&c.forEach(function(e){e.addEventListener("scroll",s.update,qt)}),l&&o.addEventListener("resize",s.update,qt),function(){n&&c.forEach(function(e){e.removeEventListener("scroll",s.update,qt)}),l&&o.removeEventListener("resize",s.update,qt)}},data:{}};var Ut={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,function(e){return Ut[e]})}var Vt={start:"end",end:"start"};function Yt(e){return e.replace(/start|end/g,function(e){return Vt[e]})}function Jt(e){var t=ut(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Xt(e){return wt(Et(e)).left+Jt(e).scrollLeft}function Qt(e){var t=St(e),s=t.overflow,a=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+i+a)}function Kt(e){return["html","body","#document"].indexOf(ht(e))>=0?e.ownerDocument.body:ft(e)&&Qt(e)?e:Kt(Tt(e))}function Gt(e,t){var s;void 0===t&&(t=[]);var a=Kt(e),i=a===(null==(s=e.ownerDocument)?void 0:s.body),n=ut(a),r=i?[n].concat(n.visualViewport||[],Qt(a)?a:[]):a,l=t.concat(r);return i?l:l.concat(Gt(Tt(r)))}function Zt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function es(e,t,s){return t===Ke?Zt(function(e,t){var s=ut(e),a=Et(e),i=s.visualViewport,n=a.clientWidth,r=a.clientHeight,l=0,o=0;if(i){n=i.width,r=i.height;var c=_t();(c||!c&&"fixed"===t)&&(l=i.offsetLeft,o=i.offsetTop)}return{width:n,height:r,x:l+Xt(e),y:o}}(e,s)):pt(t)?((i=wt(a=t,!1,"fixed"===s)).top=i.top+a.clientTop,i.left=i.left+a.clientLeft,i.bottom=i.top+a.clientHeight,i.right=i.left+a.clientWidth,i.width=a.clientWidth,i.height=a.clientHeight,i.x=i.left,i.y=i.top,i):Zt(function(e){var t,s=Et(e),a=Jt(e),i=null==(t=e.ownerDocument)?void 0:t.body,n=jt(s.scrollWidth,s.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=jt(s.scrollHeight,s.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-a.scrollLeft+Xt(e),o=-a.scrollTop;return"rtl"===St(i||s).direction&&(l+=jt(s.clientWidth,i?i.clientWidth:0)-n),{width:n,height:r,x:l,y:o}}(Et(e)));var a,i}function ts(e){var t,s=e.reference,a=e.element,i=e.placement,n=i?gt(i):null,r=i?zt(i):null,l=s.x+s.width/2-a.width/2,o=s.y+s.height/2-a.height/2;switch(n){case qe:t={x:l,y:s.y-a.height};break;case He:t={x:l,y:s.y+s.height};break;case Ue:t={x:s.x+s.width,y:o};break;case We:t={x:s.x-a.width,y:o};break;default:t={x:s.x,y:s.y}}var c=n?Dt(n):null;if(null!=c){var d="y"===c?"height":"width";switch(r){case Je:t[c]=t[c]-(s[d]/2-a[d]/2);break;case Xe:t[c]=t[c]+(s[d]/2-a[d]/2)}}return t}function ss(e,t){void 0===t&&(t={});var s,a,i,n,r,l,o,c,d,m,h,u=t,p=u.placement,f=void 0===p?e.placement:p,b=u.strategy,x=void 0===b?e.strategy:b,g=u.boundary,j=void 0===g?Qe:g,v=u.rootBoundary,N=void 0===v?Ke:v,y=u.elementContext,_=void 0===y?Ge:y,w=u.altBoundary,k=void 0!==w&&w,C=u.padding,S=void 0===C?0:C,A=Lt("number"!=typeof S?S:Ft(S,Ye)),E=_===Ge?Ze:Ge,T=e.rects.popper,P=e.elements[k?E:_],O=(s=pt(P)?P:P.contextElement||Et(e.elements.popper),i=N,n=x,c="clippingParents"===(a=j)?(l=Gt(Tt(r=s)),pt(o=["absolute","fixed"].indexOf(St(r).position)>=0&&ft(r)?Ot(r):r)?l.filter(function(e){return pt(e)&&Ct(e,o)&&"body"!==ht(e)}):[]):[].concat(a),d=[].concat(c,[i]),m=d[0],h=d.reduce(function(e,t){var a=es(s,t,n);return e.top=jt(a.top,e.top),e.right=vt(a.right,e.right),e.bottom=vt(a.bottom,e.bottom),e.left=jt(a.left,e.left),e},es(s,m,n)),h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h),D=wt(e.elements.reference),$=ts({reference:D,element:T,placement:f}),L=Zt(Object.assign({},T,$)),F=_===Ge?L:D,I={top:O.top-F.top+A.top,bottom:F.bottom-O.bottom+A.bottom,left:O.left-F.left+A.left,right:F.right-O.right+A.right},z=e.modifiersData.offset;if(_===Ge&&z){var M=z[f];Object.keys(I).forEach(function(e){var t=[Ue,He].indexOf(e)>=0?1:-1,s=[qe,He].indexOf(e)>=0?"y":"x";I[e]+=M[s]*t})}return I}function as(e,t){void 0===t&&(t={});var s=t,a=s.placement,i=s.boundary,n=s.rootBoundary,r=s.padding,l=s.flipVariations,o=s.allowedAutoPlacements,c=void 0===o?tt:o,d=zt(a),m=d?l?et:et.filter(function(e){return zt(e)===d}):Ye,h=m.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=m);var u=h.reduce(function(t,s){return t[s]=ss(e,{placement:s,boundary:i,rootBoundary:n,padding:r})[gt(s)],t},{});return Object.keys(u).sort(function(e,t){return u[e]-u[t]})}const is={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var i=s.mainAxis,n=void 0===i||i,r=s.altAxis,l=void 0===r||r,o=s.fallbackPlacements,c=s.padding,d=s.boundary,m=s.rootBoundary,h=s.altBoundary,u=s.flipVariations,p=void 0===u||u,f=s.allowedAutoPlacements,b=t.options.placement,x=gt(b),g=o||(x!==b&&p?function(e){if(gt(e)===Ve)return[];var t=Wt(e);return[Yt(e),t,Yt(t)]}(b):[Wt(b)]),j=[b].concat(g).reduce(function(e,s){return e.concat(gt(s)===Ve?as(t,{placement:s,boundary:d,rootBoundary:m,padding:c,flipVariations:p,allowedAutoPlacements:f}):s)},[]),v=t.rects.reference,N=t.rects.popper,y=new Map,_=!0,w=j[0],k=0;k<j.length;k++){var C=j[k],S=gt(C),A=zt(C)===Je,E=[qe,He].indexOf(S)>=0,T=E?"width":"height",P=ss(t,{placement:C,boundary:d,rootBoundary:m,altBoundary:h,padding:c}),O=E?A?Ue:We:A?He:qe;v[T]>N[T]&&(O=Wt(O));var D=Wt(O),$=[];if(n&&$.push(P[S]<=0),l&&$.push(P[O]<=0,P[D]<=0),$.every(function(e){return e})){w=C,_=!1;break}y.set(C,$)}if(_)for(var L=function(e){var t=j.find(function(t){var s=y.get(t);if(s)return s.slice(0,e).every(function(e){return e})});if(t)return w=t,"break"},F=p?3:1;F>0&&"break"!==L(F);F--);t.placement!==w&&(t.modifiersData[a]._skip=!0,t.placement=w,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ns(e,t,s){return void 0===s&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function rs(e){return[qe,Ue,He,We].some(function(t){return e[t]>=0})}const ls={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,s=e.name,a=t.rects.reference,i=t.rects.popper,n=t.modifiersData.preventOverflow,r=ss(t,{elementContext:"reference"}),l=ss(t,{altBoundary:!0}),o=ns(r,a),c=ns(l,i,n),d=rs(o),m=rs(c);t.modifiersData[s]={referenceClippingOffsets:o,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}},os={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,s=e.options,a=e.name,i=s.offset,n=void 0===i?[0,0]:i,r=tt.reduce(function(e,s){return e[s]=(a=s,i=t.rects,r=n,l=gt(a),o=[We,qe].indexOf(l)>=0?-1:1,c="function"==typeof r?r(Object.assign({},i,{placement:a})):r,d=c[0],m=c[1],d=d||0,m=(m||0)*o,[We,Ue].indexOf(l)>=0?{x:m,y:d}:{x:d,y:m}),e;var a,i,r,l,o,c,d,m},{}),l=r[t.placement],o=l.x,c=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=c),t.modifiersData[a]=r}},cs={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,s=e.name;t.modifiersData[s]=ts({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},ds={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,s,a=e.state,i=e.options,n=e.name,r=i.mainAxis,l=void 0===r||r,o=i.altAxis,c=void 0!==o&&o,d=i.boundary,m=i.rootBoundary,h=i.altBoundary,u=i.padding,p=i.tether,f=void 0===p||p,b=i.tetherOffset,x=void 0===b?0:b,g=ss(a,{boundary:d,rootBoundary:m,padding:u,altBoundary:h}),j=gt(a.placement),v=zt(a.placement),N=!v,y=Dt(j),_="x"===y?"y":"x",w=a.modifiersData.popperOffsets,k=a.rects.reference,C=a.rects.popper,S="function"==typeof x?x(Object.assign({},a.rects,{placement:a.placement})):x,A="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,T={x:0,y:0};if(w){if(l){var P,O="y"===y?qe:We,D="y"===y?He:Ue,$="y"===y?"height":"width",L=w[y],F=L+g[O],I=L-g[D],z=f?-C[$]/2:0,M=v===Je?k[$]:C[$],R=v===Je?-C[$]:-k[$],B=a.elements.arrow,q=f&&B?kt(B):{width:0,height:0},H=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=H[O],W=H[D],V=$t(0,k[$],q[$]),Y=N?k[$]/2-z-V-U-A.mainAxis:M-V-U-A.mainAxis,J=N?-k[$]/2+z+V+W+A.mainAxis:R+V+W+A.mainAxis,X=a.elements.arrow&&Ot(a.elements.arrow),Q=X?"y"===y?X.clientTop||0:X.clientLeft||0:0,K=null!=(P=null==E?void 0:E[y])?P:0,G=L+J-K,Z=$t(f?vt(F,L+Y-K-Q):F,L,f?jt(I,G):I);w[y]=Z,T[y]=Z-L}if(c){var ee,te="x"===y?qe:We,se="x"===y?He:Ue,ae=w[_],ie="y"===_?"height":"width",ne=ae+g[te],re=ae-g[se],le=-1!==[qe,We].indexOf(j),oe=null!=(ee=null==E?void 0:E[_])?ee:0,ce=le?ne:ae-k[ie]-C[ie]-oe+A.altAxis,de=le?ae+k[ie]+C[ie]-oe-A.altAxis:re,me=f&&le?(s=$t(ce,ae,t=de))>t?t:s:$t(f?ce:ne,ae,f?de:re);w[_]=me,T[_]=me-ae}a.modifiersData[n]=T}},requiresIfExists:["offset"]};function ms(e,t,s){void 0===s&&(s=!1);var a,i,n,r,l,o,c=ft(t),d=ft(t)&&(r=(n=t).getBoundingClientRect(),l=Nt(r.width)/n.offsetWidth||1,o=Nt(r.height)/n.offsetHeight||1,1!==l||1!==o),m=Et(t),h=wt(e,d,s),u={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(c||!c&&!s)&&(("body"!==ht(t)||Qt(m))&&(u=(a=t)!==ut(a)&&ft(a)?{scrollLeft:(i=a).scrollLeft,scrollTop:i.scrollTop}:Jt(a)),ft(t)?((p=wt(t,!0)).x+=t.clientLeft,p.y+=t.clientTop):m&&(p.x=Xt(m))),{x:h.left+u.scrollLeft-p.x,y:h.top+u.scrollTop-p.y,width:h.width,height:h.height}}function hs(e){var t=new Map,s=new Set,a=[];function i(e){s.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!s.has(e)){var a=t.get(e);a&&i(a)}}),a.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){s.has(e.name)||i(e)}),a}var us={placement:"bottom",modifiers:[],strategy:"absolute"};function ps(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function fs(e){void 0===e&&(e={});var t=e,s=t.defaultModifiers,a=void 0===s?[]:s,i=t.defaultOptions,n=void 0===i?us:i;return function(e,t,s){void 0===s&&(s=n);var i,r,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},us,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],c=!1,d={state:l,setOptions:function(s){var i="function"==typeof s?s(l.options):s;m(),l.options=Object.assign({},n,l.options,i),l.scrollParents={reference:pt(e)?Gt(e):e.contextElement?Gt(e.contextElement):[],popper:Gt(t)};var r,c,h,u,p=(r=[].concat(a,l.options.modifiers),c=r.reduce(function(e,t){var s=e[t.name];return e[t.name]=s?Object.assign({},s,t,{options:Object.assign({},s.options,t.options),data:Object.assign({},s.data,t.data)}):t,e},{}),h=Object.keys(c).map(function(e){return c[e]}),u=hs(h),mt.reduce(function(e,t){return e.concat(u.filter(function(e){return e.phase===t}))},[]));return l.orderedModifiers=p.filter(function(e){return e.enabled}),l.orderedModifiers.forEach(function(e){var t=e.name,s=e.options,a=void 0===s?{}:s,i=e.effect;if("function"==typeof i){var n=i({state:l,name:t,instance:d,options:a});o.push(n||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=l.elements,t=e.reference,s=e.popper;if(ps(t,s)){l.rects={reference:ms(t,Ot(s),"fixed"===l.options.strategy),popper:kt(s)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var a=0;a<l.orderedModifiers.length;a++)if(!0!==l.reset){var i=l.orderedModifiers[a],n=i.fn,r=i.options,o=void 0===r?{}:r,m=i.name;"function"==typeof n&&(l=n({state:l,options:o,name:m,instance:d})||l)}else l.reset=!1,a=-1}}},update:(i=function(){return new Promise(function(e){d.forceUpdate(),e(l)})},function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(i())})})),r}),destroy:function(){m(),c=!0}};if(!ps(e,t))return d;function m(){o.forEach(function(e){return e()}),o=[]}return d.setOptions(s).then(function(e){!c&&s.onFirstUpdate&&s.onFirstUpdate(e)}),d}}var bs=fs(),xs=fs({defaultModifiers:[Ht,cs,Bt,xt]}),gs=fs({defaultModifiers:[Ht,cs,Bt,xt,os,is,ds,It,ls]});const js=Object.freeze(Object.defineProperty({__proto__:null,afterMain:lt,afterRead:it,afterWrite:dt,applyStyles:xt,arrow:It,auto:Ve,basePlacements:Ye,beforeMain:nt,beforeRead:st,beforeWrite:ot,bottom:He,clippingParents:Qe,computeStyles:Bt,createPopper:gs,createPopperBase:bs,createPopperLite:xs,detectOverflow:ss,end:Xe,eventListeners:Ht,flip:is,hide:ls,left:We,main:rt,modifierPhases:mt,offset:os,placements:tt,popper:Ge,popperGenerator:fs,popperOffsets:cs,preventOverflow:ds,read:at,reference:Ze,right:Ue,start:Je,top:qe,variationPlacements:et,viewport:Ke,write:ct},Symbol.toStringTag,{value:"Module"})),vs="dropdown",Ns=".bs.dropdown",ys=".data-api",_s="ArrowUp",ws="ArrowDown",ks=`hide${Ns}`,Cs=`hidden${Ns}`,Ss=`show${Ns}`,As=`shown${Ns}`,Es=`click${Ns}${ys}`,Ts=`keydown${Ns}${ys}`,Ps=`keyup${Ns}${ys}`,Os="show",Ds='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',$s=`${Ds}.${Os}`,Ls=".dropdown-menu",Fs=p()?"top-end":"top-start",Is=p()?"top-start":"top-end",zs=p()?"bottom-end":"bottom-start",Ms=p()?"bottom-start":"bottom-end",Rs=p()?"left-start":"right-start",Bs=p()?"right-start":"left-start",qs={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Hs={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Us extends R{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=q.next(this._element,Ls)[0]||q.prev(this._element,Ls)[0]||q.findOne(Ls,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qs}static get DefaultType(){return Hs}static get NAME(){return vs}toggle(){return this._isShown()?this.hide():this.show()}show(){if(o(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!$.trigger(this._element,Ss,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))$.on(e,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Os),this._element.classList.add(Os),$.trigger(this._element,As,e)}}hide(){if(o(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!$.trigger(this._element,ks,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))$.off(e,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(Os),this._element.classList.remove(Os),this._element.setAttribute("aria-expanded","false"),z.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Cs,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!n(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${vs.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===js)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:n(this._config.reference)?e=r(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=gs(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Os)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Rs;if(e.classList.contains("dropstart"))return Bs;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Is:Fs:t?Ms:zs}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(z.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...b(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const s=q.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>l(e));s.length&&g(s,t,e===ws,!s.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Us.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=q.find($s);for(const s of t){const t=Us.getInstance(s);if(!t||!1===t._config.autoClose)continue;const a=e.composedPath(),i=a.includes(t._menu);if(a.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:t._element};"click"===e.type&&(n.clickEvent=e),t._completeHide(n)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),s="Escape"===e.key,a=[_s,ws].includes(e.key);if(!a&&!s)return;if(t&&!s)return;e.preventDefault();const i=this.matches(Ds)?this:q.prev(this,Ds)[0]||q.next(this,Ds)[0]||q.findOne(Ds,e.delegateTarget.parentNode),n=Us.getOrCreateInstance(i);if(a)return e.stopPropagation(),n.show(),void n._selectMenuItem(e);n._isShown()&&(e.stopPropagation(),n.hide(),i.focus())}}$.on(document,Ts,Ds,Us.dataApiKeydownHandler),$.on(document,Ts,Ls,Us.dataApiKeydownHandler),$.on(document,Es,Us.clearMenus),$.on(document,Ps,Us.clearMenus),$.on(document,Es,Ds,function(e){e.preventDefault(),Us.getOrCreateInstance(this).toggle()}),f(Us);const Ws="backdrop",Vs="show",Ys=`mousedown.bs.${Ws}`,Js={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Xs={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qs extends M{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Js}static get DefaultType(){return Xs}static get NAME(){return Ws}show(e){if(!this._config.isVisible)return void b(e);this._append();const t=this._getElement();this._config.isAnimated&&m(t),t.classList.add(Vs),this._emulateAnimation(()=>{b(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Vs),this._emulateAnimation(()=>{this.dispose(),b(e)})):b(e)}dispose(){this._isAppended&&($.off(this._element,Ys),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=r(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),$.on(e,Ys,()=>{b(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){x(e,this._getElement(),this._config.isAnimated)}}const Ks=".bs.focustrap",Gs=`focusin${Ks}`,Zs=`keydown.tab${Ks}`,ea="backward",ta={autofocus:!0,trapElement:null},sa={autofocus:"boolean",trapElement:"element"};class aa extends M{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ta}static get DefaultType(){return sa}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,Ks),$.on(document,Gs,e=>this._handleFocusin(e)),$.on(document,Zs,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,Ks))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const s=q.focusableChildren(t);0===s.length?t.focus():this._lastTabNavDirection===ea?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?ea:"forward")}}const ia=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",na=".sticky-top",ra="padding-right",la="margin-right";class oa{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ra,t=>t+e),this._setElementAttributes(ia,ra,t=>t+e),this._setElementAttributes(na,la,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ra),this._resetElementAttributes(ia,ra),this._resetElementAttributes(na,la)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,s){const a=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+a)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${s(Number.parseFloat(i))}px`)})}_saveInitialAttribute(e,t){const s=e.style.getPropertyValue(t);s&&z.setDataAttribute(e,t,s)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const s=z.getDataAttribute(e,t);null!==s?(z.removeDataAttribute(e,t),e.style.setProperty(t,s)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(n(e))t(e);else for(const s of q.find(e,this._element))t(s)}}const ca=".bs.modal",da=`hide${ca}`,ma=`hidePrevented${ca}`,ha=`hidden${ca}`,ua=`show${ca}`,pa=`shown${ca}`,fa=`resize${ca}`,ba=`click.dismiss${ca}`,xa=`mousedown.dismiss${ca}`,ga=`keydown.dismiss${ca}`,ja=`click${ca}.data-api`,va="modal-open",Na="show",ya="modal-static",_a={backdrop:!0,focus:!0,keyboard:!0},wa={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ka extends R{constructor(e,t){super(e,t),this._dialog=q.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new oa,this._addEventListeners()}static get Default(){return _a}static get DefaultType(){return wa}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||$.trigger(this._element,ua,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(va),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&($.trigger(this._element,da).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Na),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){$.off(window,ca),$.off(this._dialog,ca),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qs({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new aa({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=q.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),m(this._element),this._element.classList.add(Na),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,pa,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,ga,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),$.on(window,fa,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,xa,e=>{$.one(this._element,ba,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(va),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,ha)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if($.trigger(this._element,ma).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(ya)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ya),this._queueCallback(()=>{this._element.classList.remove(ya),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),s=t>0;if(s&&!e){const e=p()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!s&&e){const e=p()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const s=ka.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e](t)}})}}$.on(document,ja,'[data-bs-toggle="modal"]',function(e){const t=q.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),$.one(t,ua,e=>{e.defaultPrevented||$.one(t,ha,()=>{l(this)&&this.focus()})});const s=q.findOne(".modal.show");s&&ka.getInstance(s).hide(),ka.getOrCreateInstance(t).toggle(this)}),H(ka),f(ka);const Ca=".bs.offcanvas",Sa=".data-api",Aa=`load${Ca}${Sa}`,Ea="show",Ta="showing",Pa="hiding",Oa=".offcanvas.show",Da=`show${Ca}`,$a=`shown${Ca}`,La=`hide${Ca}`,Fa=`hidePrevented${Ca}`,Ia=`hidden${Ca}`,za=`resize${Ca}`,Ma=`click${Ca}${Sa}`,Ra=`keydown.dismiss${Ca}`,Ba={backdrop:!0,keyboard:!0,scroll:!1},qa={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ha extends R{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ba}static get DefaultType(){return qa}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||$.trigger(this._element,Da,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new oa).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ta),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ea),this._element.classList.remove(Ta),$.trigger(this._element,$a,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&($.trigger(this._element,La).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Pa),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ea,Pa),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new oa).reset(),$.trigger(this._element,Ia)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Qs({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():$.trigger(this._element,Fa)}:null})}_initializeFocusTrap(){return new aa({trapElement:this._element})}_addEventListeners(){$.on(this._element,Ra,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():$.trigger(this._element,Fa))})}static jQueryInterface(e){return this.each(function(){const t=Ha.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}$.on(document,Ma,'[data-bs-toggle="offcanvas"]',function(e){const t=q.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),o(this))return;$.one(t,Ia,()=>{l(this)&&this.focus()});const s=q.findOne(Oa);s&&s!==t&&Ha.getInstance(s).hide(),Ha.getOrCreateInstance(t).toggle(this)}),$.on(window,Aa,()=>{for(const e of q.find(Oa))Ha.getOrCreateInstance(e).show()}),$.on(window,za,()=>{for(const e of q.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ha.getOrCreateInstance(e).hide()}),H(Ha),f(Ha);const Ua={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Wa=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Va=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ya=(e,t)=>{const s=e.nodeName.toLowerCase();return t.includes(s)?!Wa.has(s)||Boolean(Va.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(s))},Ja={allowList:Ua,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Xa={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qa={entry:"(string|element|function|null)",selector:"(string|element)"};class Ka extends M{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Ja}static get DefaultType(){return Xa}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[a,i]of Object.entries(this._config.content))this._setContent(e,i,a);const t=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&t.classList.add(...s.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,s]of Object.entries(e))super._typeCheckConfig({selector:t,entry:s},Qa)}_setContent(e,t,s){const a=q.findOne(s,e);a&&((t=this._resolvePossibleFunction(t))?n(t)?this._putElementInTemplate(r(t),a):this._config.html?a.innerHTML=this._maybeSanitize(t):a.textContent=t:a.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,s){if(!e.length)return e;if(s&&"function"==typeof s)return s(e);const a=(new window.DOMParser).parseFromString(e,"text/html"),i=[].concat(...a.body.querySelectorAll("*"));for(const n of i){const e=n.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){n.remove();continue}const s=[].concat(...n.attributes),a=[].concat(t["*"]||[],t[e]||[]);for(const t of s)Ya(t,a)||n.removeAttribute(t.nodeName)}return a.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return b(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Ga=new Set(["sanitize","allowList","sanitizeFn"]),Za="fade",ei="show",ti=".modal",si="hide.bs.modal",ai="hover",ii="focus",ni={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},ri={allowList:Ua,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},li={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class oi extends R{constructor(e,t){if(void 0===js)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ri}static get DefaultType(){return li}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(ti),si,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=$.trigger(this._element,this.constructor.eventName("show")),t=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(s),$.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(s),s.classList.add(ei),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))$.on(i,"mouseover",d);this._queueCallback(()=>{$.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!$.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ei),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))$.off(e,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[ii]=!1,this._activeTrigger[ai]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Za,ei),t.classList.add(`bs-${this.constructor.NAME}-auto`);const s=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",s),this._isAnimated()&&t.classList.add(Za),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Ka({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Za)}_isShown(){return this.tip&&this.tip.classList.contains(ei)}_createPopper(e){const t=b(this._config.placement,[this,e,this._element]),s=ni[t.toUpperCase()];return gs(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return b(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...b(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)$.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==t){const e=t===ai?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),s=t===ai?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");$.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?ii:ai]=!0,t._enter()}),$.on(this._element,s,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?ii:ai]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(ti),si,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=z.getDataAttributes(this._element);for(const s of Object.keys(t))Ga.has(s)&&delete t[s];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:r(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,s]of Object.entries(this._config))this.constructor.Default[t]!==s&&(e[t]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=oi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}f(oi);const ci={...oi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},di={...oi.DefaultType,content:"(null|string|element|function)"};class mi extends oi{static get Default(){return ci}static get DefaultType(){return di}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=mi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}f(mi);const hi=".bs.scrollspy",ui=`activate${hi}`,pi=`click${hi}`,fi=`load${hi}.data-api`,bi="active",xi="[href]",gi=".nav-link",ji=`${gi}, .nav-item > ${gi}, .list-group-item`,vi={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ni={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yi extends R{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return vi}static get DefaultType(){return Ni}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=r(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,pi),$.on(this._config.target,pi,xi,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const s=this._rootElement||window,a=t.offsetTop-this._element.offsetTop;if(s.scrollTo)return void s.scrollTo({top:a,behavior:"smooth"});s.scrollTop=a}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),s=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},a=(this._rootElement||document.documentElement).scrollTop,i=a>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=a;for(const n of e){if(!n.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(n));continue}const e=n.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(s(n),!a)return}else i||e||s(n)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=q.find(xi,this._config.target);for(const t of e){if(!t.hash||o(t))continue;const e=q.findOne(decodeURI(t.hash),this._element);l(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(bi),this._activateParents(e),$.trigger(this._element,ui,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))q.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(bi);else for(const t of q.parents(e,".nav, .list-group"))for(const e of q.prev(t,ji))e.classList.add(bi)}_clearActiveClass(e){e.classList.remove(bi);const t=q.find(`${xi}.${bi}`,e);for(const s of t)s.classList.remove(bi)}static jQueryInterface(e){return this.each(function(){const t=yi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}$.on(window,fi,()=>{for(const e of q.find('[data-bs-spy="scroll"]'))yi.getOrCreateInstance(e)}),f(yi);const _i=".bs.tab",wi=`hide${_i}`,ki=`hidden${_i}`,Ci=`show${_i}`,Si=`shown${_i}`,Ai=`click${_i}`,Ei=`keydown${_i}`,Ti=`load${_i}`,Pi="ArrowLeft",Oi="ArrowRight",Di="ArrowUp",$i="ArrowDown",Li="Home",Fi="End",Ii="active",zi="fade",Mi="show",Ri=".dropdown-toggle",Bi=`:not(${Ri})`,qi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Hi=`.nav-link${Bi}, .list-group-item${Bi}, [role="tab"]${Bi}, ${qi}`,Ui=`.${Ii}[data-bs-toggle="tab"], .${Ii}[data-bs-toggle="pill"], .${Ii}[data-bs-toggle="list"]`;class Wi extends R{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,Ei,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),s=t?$.trigger(t,wi,{relatedTarget:e}):null;$.trigger(e,Ci,{relatedTarget:t}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ii),this._activate(q.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),$.trigger(e,Si,{relatedTarget:t})):e.classList.add(Mi)},e,e.classList.contains(zi)))}_deactivate(e,t){e&&(e.classList.remove(Ii),e.blur(),this._deactivate(q.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),$.trigger(e,ki,{relatedTarget:t})):e.classList.remove(Mi)},e,e.classList.contains(zi)))}_keydown(e){if(![Pi,Oi,Di,$i,Li,Fi].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!o(e));let s;if([Li,Fi].includes(e.key))s=t[e.key===Li?0:t.length-1];else{const a=[Oi,$i].includes(e.key);s=g(t,e.target,a,!0)}s&&(s.focus({preventScroll:!0}),Wi.getOrCreateInstance(s).show())}_getChildren(){return q.find(Hi,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const s of t)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",t),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=q.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const s=this._getOuterElement(e);if(!s.classList.contains("dropdown"))return;const a=(e,a)=>{const i=q.findOne(e,s);i&&i.classList.toggle(a,t)};a(Ri,Ii),a(".dropdown-menu",Mi),s.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,s){e.hasAttribute(t)||e.setAttribute(t,s)}_elemIsActive(e){return e.classList.contains(Ii)}_getInnerElement(e){return e.matches(Hi)?e:q.findOne(Hi,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=Wi.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}$.on(document,Ai,qi,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),o(this)||Wi.getOrCreateInstance(this).show()}),$.on(window,Ti,()=>{for(const e of q.find(Ui))Wi.getOrCreateInstance(e)}),f(Wi);const Vi=".bs.toast",Yi=`mouseover${Vi}`,Ji=`mouseout${Vi}`,Xi=`focusin${Vi}`,Qi=`focusout${Vi}`,Ki=`hide${Vi}`,Gi=`hidden${Vi}`,Zi=`show${Vi}`,en=`shown${Vi}`,tn="hide",sn="show",an="showing",nn={animation:"boolean",autohide:"boolean",delay:"number"},rn={animation:!0,autohide:!0,delay:5e3};class ln extends R{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return rn}static get DefaultType(){return nn}static get NAME(){return"toast"}show(){$.trigger(this._element,Zi).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(tn),m(this._element),this._element.classList.add(sn,an),this._queueCallback(()=>{this._element.classList.remove(an),$.trigger(this._element,en),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&($.trigger(this._element,Ki).defaultPrevented||(this._element.classList.add(an),this._queueCallback(()=>{this._element.classList.add(tn),this._element.classList.remove(an,sn),$.trigger(this._element,Gi)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(sn),super.dispose()}isShown(){return this._element.classList.contains(sn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,Yi,e=>this._onInteraction(e,!0)),$.on(this._element,Ji,e=>this._onInteraction(e,!1)),$.on(this._element,Xi,e=>this._onInteraction(e,!0)),$.on(this._element,Qi,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=ln.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}return H(ln),f(ln),{Alert:Y,Button:X,Carousel:Se,Collapse:Be,Dropdown:Us,Modal:ka,Offcanvas:Ha,Popover:mi,ScrollSpy:yi,Tab:Wi,Toast:ln,Tooltip:oi}}()),j.createRoot(document.getElementById("root")).render(x.jsx(d,{children:x.jsx(N,{children:x.jsx(ve,{})})}));
